<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="stylesheet" href="/article/css/index.css"><link rel="icon" href="/article/favicon.ico"><link rel="manifest" href="/article/manifest.json"><title> | 博客记录点滴</title><meta name="description" content="知识像烛光，能照亮一个人，也能照亮无数人">
    <link rel="preload" href="/article/assets/style.367d49ab.css" as="style" /><link rel="stylesheet" href="/article/assets/style.367d49ab.css" />
    <link rel="modulepreload" href="/article/assets/app.26c798e2.js"><link rel="modulepreload" href="/article/assets/index.html.c9d0ce1f.js"><link rel="modulepreload" href="/article/assets/index.html.325b7b5d.js"><link rel="prefetch" href="/article/assets/index.html.ef4ad727.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a3fc6852.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.be9a096e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.227d830a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a5bf71e8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4aaf1b32.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1802367d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.cb61ebd6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ebad8ba5.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.805facff.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4d906e46.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ce650e59.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.52df6805.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.287e1070.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.afd5d1d3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4afa3c1b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.398da711.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.27f15691.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1ec3ad03.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9739ca68.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.68ee19d6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c2debd23.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3b22fc2b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.579ccbd2.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.50040446.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4e603f3c.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.869c36a5.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7625e176.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e0bdf8af.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c33d220f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ca525dbb.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e1812bf5.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d36bffe3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.abeb0055.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.354c7e72.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.fc0d59e1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.73059667.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.bf7b40e1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8c61ec69.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.93531fa2.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3df62493.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4692bfbb.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4c0093be.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2c58a633.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8ad17dcb.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4e58e59a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7e338eaa.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.bd02477e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.747f0a06.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c33dd68a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b10c3c68.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5d9076fd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.acaf41da.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d8a2d513.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a54ffb4b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8df33d08.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.32a02580.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3a180d41.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ef6917f4.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.00805c75.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8ac2bc31.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.37dbda03.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.62ee0264.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b3c53cbd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5231f4a1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c597babe.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.fbe7bf5f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a98b69a3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b2e5dc0f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.92f260cd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.6719af13.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b3864b93.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8d4c4dde.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.369a93b7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.929adcc4.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2e545c2f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.fd0bfa61.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d796af7a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.51150af7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0ad59873.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.70b12921.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c52db0e0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4c934b65.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.fee734d8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.115fe07a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.bca8ce41.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.cdd9d88f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b3564dcf.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2de5d879.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ddf398ed.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ce7a3db7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0113e8ac.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.edde605b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.22d1098e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3cd1a946.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b77920f0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.63e76b9e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.fbbe1d9f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b5cf1b5a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.6f659808.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4224f6c9.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.75b49027.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.81ae5c09.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.aed6b65d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1a6a6d2f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b9a4781a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.df42fd6c.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.f6f7a1f6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.398e4f7a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d709d13e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9582a509.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.09dfaaed.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9de292e8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.863689b8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2394cf8e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.bbab6805.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7ff6d0b7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5a1f3337.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b6bb2b68.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.33541706.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0ec60efd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3a95d27d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.510070ec.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1f59a98c.js" as="script" /><link rel="prefetch" href="/article/assets/404.html.c3e557d0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.82ae1957.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.734d092d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5363f504.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.f13be4dd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b9eb8ecd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.df2cdfe3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.729e38ac.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.f37118ab.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5043a6e5.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.68fc5544.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a25372ce.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.dbe8a16f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0e4289af.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.75a21273.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9bed45b0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7b549686.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b4201f2c.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.83ba6094.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e6612837.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.80c6495f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.628972c1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c5a2f2c2.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.98d7b8d3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5e07b0ac.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7f598269.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5b7c47c3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.653980ca.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7d8b07b8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3c32c632.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d0f37cee.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2b456210.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8213f5a4.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ea7de8f7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.43f3fcdb.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.6e50edc8.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8a2a85e7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a2079474.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e5063b39.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.741d66ee.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.dfa7e4de.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.85b54799.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d46bac4a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e7603c13.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a7935f72.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.18f8aca0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.be5f45bc.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.66826352.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7f26186a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e20c6165.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e50ef8e6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.dc817af1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b4e8b61e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.bd63cd92.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c6cedab3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ec51671a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9788f88e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8925b796.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.73e6fe48.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.738892ec.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.53358f45.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2cb1fab2.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.107c2c11.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d02d4408.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3888b26f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b19a9b6b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1958e81f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.1f44a5a7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2965a851.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.6c4bc07e.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b91ba1e3.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.b998291b.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2fc05da9.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5c3e7353.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a0a48978.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.17db2ba6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.69dd4031.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.df4e8c04.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.79aba9ea.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.591ac792.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.82df84b4.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e77e6ab6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.490a65dd.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.72edd6c9.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.78da9bb6.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.188a1e46.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3b573467.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.03ec5e44.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.2323794a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.dfb8af67.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a1fddc79.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.429ea55a.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ba545743.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.67888319.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e2dad021.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.87a6255c.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d2f6b523.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.001f069d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.4ff8c6f0.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.48c4ec78.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.49deba7d.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a8e7c6aa.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0999e547.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.e9a437a1.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.0ed06d50.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.c0e65d14.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.9d7dd13c.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.51b3b9dc.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a3bd7cdf.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.eb1c7570.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ef93ff92.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a8164867.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.8852bd65.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.3a6b760f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ee00fef9.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.ed1275ab.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.98340012.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.108b3bc7.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.d26e7fde.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.04e93346.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.14778f49.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.f3b2851f.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.a8dd67ce.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.7c78bc43.js" as="script" /><link rel="prefetch" href="/article/assets/index.html.5fda34f3.js" as="script" /><link rel="prefetch" href="/article/assets/404.html.88b76eab.js" as="script" /><link rel="prefetch" href="/article/assets/SearchResult.a24f9fce.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/article/" class=""><img class="logo" src="/article/logo.png" alt="博客记录点滴"><span class="site-name can-hide">博客记录点滴</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/js/base/" class="" aria-label="js 基础"><!--[--><!--]--> js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>TypeScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/js/ts/base/" class="" aria-label="ts 基础"><!--[--><!--]--> ts 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/js/ts/tstype/" class="" aria-label="ts 体操类型"><!--[--><!--]--> ts 体操类型 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/resource/other/" class="" aria-label="网络资源"><!--[--><!--]--> 网络资源 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/fe_performance/" class="" aria-label="网站性能优化"><!--[--><!--]--> 网站性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/git/" class="" aria-label="git常用命令"><!--[--><!--]--> git常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/linux/" class="" aria-label="linux常用命令"><!--[--><!--]--> linux常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/adb/" class="" aria-label="adb常用命令"><!--[--><!--]--> adb常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/mysql/" class="" aria-label="mysql常用命令"><!--[--><!--]--> mysql常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/mongodb/" class="" aria-label="mongodb常用命令"><!--[--><!--]--> mongodb常用命令 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>文章推荐</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202312/" class="" aria-label="2312"><!--[--><!--]--> 2312 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202311/" class="" aria-label="2311"><!--[--><!--]--> 2311 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202310/" class="" aria-label="2310"><!--[--><!--]--> 2310 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202309/" class="" aria-label="2309"><!--[--><!--]--> 2309 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202308/" class="" aria-label="2308"><!--[--><!--]--> 2308 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202307/" class="" aria-label="2307"><!--[--><!--]--> 2307 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202306/" class="" aria-label="2306"><!--[--><!--]--> 2306 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202305/" class="" aria-label="2305"><!--[--><!--]--> 2305 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202304/" class="" aria-label="2304"><!--[--><!--]--> 2304 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202212/" class="" aria-label="2212"><!--[--><!--]--> 2212 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202211/" class="" aria-label="2211"><!--[--><!--]--> 2211 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202210/" class="" aria-label="2210"><!--[--><!--]--> 2210 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Css"><span class="title">Css</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Css"><span class="title">Css</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/css/layout/" class="" aria-label="Css 基础布局"><!--[--><!--]--> Css 基础布局 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/vue/base/" class="" aria-label="Vue 基础"><!--[--><!--]--> Vue 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3-notice/" class="" aria-label="Vue3 开发须知"><!--[--><!--]--> Vue3 开发须知 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3-communication/" class="" aria-label="Vue3 组件通信"><!--[--><!--]--> Vue3 组件通信 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/pinia/" class="" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue-performance/" class="" aria-label="性能优化小技巧"><!--[--><!--]--> 性能优化小技巧 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3/ts-antd-vite/" class="" aria-label="Ts-Antd 管理列表"><!--[--><!--]--> Ts-Antd 管理列表 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Nuxt</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/vue/nuxt/" class="" aria-label="Nuxt 基础"><!--[--><!--]--> Nuxt 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/base/" class="" aria-label="React 基础"><!--[--><!--]--> React 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/craco/" class="" aria-label="craco 配置指南"><!--[--><!--]--> craco 配置指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/performance/" class="" aria-label="React性能优化"><!--[--><!--]--> React性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/vueToReact/" class="" aria-label="Vue 转 React"><!--[--><!--]--> Vue 转 React <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/react-state/" class="" aria-label="React 状态管理"><!--[--><!--]--> React 状态管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/react-ts/" class="" aria-label="React+Ts"><!--[--><!--]--> React+Ts <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Umi</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/umi/umi3-antpro5-ts/" class="" aria-label="umi3"><!--[--><!--]--> umi3 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Native</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/reactnative-1/" class="" aria-label="RN 基础（上）"><!--[--><!--]--> RN 基础（上） <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/reactnative-2/" class="" aria-label="RN 基础（下）"><!--[--><!--]--> RN 基础（下） <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Next.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/nextjs/" class="" aria-label="Next.js 基础"><!--[--><!--]--> Next.js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="iOS"><span class="title">iOS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Objective-c</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/oc/" class="" aria-label="oc基础"><!--[--><!--]--> oc基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/plugins/" class="" aria-label="oc开发中常用的依赖"><!--[--><!--]--> oc开发中常用的依赖 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/oc-swift/" class="" aria-label="oc与swift混合编程"><!--[--><!--]--> oc与swift混合编程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Swift</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/swift/" class="" aria-label="swift 基础"><!--[--><!--]--> swift 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/swift-plugins/" class="" aria-label="swift开发中常用的依赖"><!--[--><!--]--> swift开发中常用的依赖 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>UI 基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/ui/" class="" aria-label="ui 基础"><!--[--><!--]--> ui 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/components/" class="" aria-label="常用组件"><!--[--><!--]--> 常用组件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/network/" class="" aria-label="网络 基础"><!--[--><!--]--> 网络 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Android"><span class="title">Android</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Android"><span class="title">Android</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Kotlin</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/kotlin/" class="" aria-label="kotlin 基础"><!--[--><!--]--> kotlin 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>UI控件</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/ui/" class="" aria-label="UI 基础"><!--[--><!--]--> UI 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/net/" class="" aria-label="网络基础"><!--[--><!--]--> 网络基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Android 四大组件</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/article/android/components/" class="router-link-active router-link-exact-active router-link-active" aria-label="四大组件"><!--[--><!--]--> 四大组件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Flutter"><span class="title">Flutter</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Flutter"><span class="title">Flutter</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/flutter/dart/" class="" aria-label="dart 基础"><!--[--><!--]--> dart 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/command/" class="" aria-label="常用命令与参考资料"><!--[--><!--]--> 常用命令与参考资料 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-1/" class="" aria-label="常用组件(上)"><!--[--><!--]--> 常用组件(上) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-2/" class="" aria-label="常用组件(中)"><!--[--><!--]--> 常用组件(中) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-3/" class="" aria-label="常用组件(下)"><!--[--><!--]--> 常用组件(下) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/plugins-1/" class="" aria-label="Flutter 常用插件-1"><!--[--><!--]--> Flutter 常用插件-1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/plugins-2/" class="" aria-label="Flutter 常用插件-2"><!--[--><!--]--> Flutter 常用插件-2 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node.js"><span class="title">Node.js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node.js"><span class="title">Node.js</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Node</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/base/" class="" aria-label="Node 基础"><!--[--><!--]--> Node 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Express</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/express/express-blog/" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Koa</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/koa/base/" class="" aria-label="Koa 基础"><!--[--><!--]--> Koa 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/koa-blog/" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/koa-restful-api/" class="" aria-label="知乎 Api"><!--[--><!--]--> 知乎 Api <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/ts-sequelize/" class="" aria-label="Koa + Ts +  Sequelize"><!--[--><!--]--> Koa + Ts +  Sequelize <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Egg.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/egg/base/" class="" aria-label="Egg.js 基础"><!--[--><!--]--> Egg.js 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/egg-sequelize/" class="" aria-label="Egg.js+Sequelize"><!--[--><!--]--> Egg.js+Sequelize <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/mongo/" class="" aria-label="Egg.js+Mongoose"><!--[--><!--]--> Egg.js+Mongoose <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/typeorm/" class="" aria-label="Egg.js+TypeORM"><!--[--><!--]--> Egg.js+TypeORM <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>NestJS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/nestJS/base/" class="" aria-label="NestJS 基础"><!--[--><!--]--> NestJS 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/nestJS/graphql/" class="" aria-label="NestJS + GraphQL"><!--[--><!--]--> NestJS + GraphQL <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Midway.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/midwayJS/" class="" aria-label="Midway.js 基础"><!--[--><!--]--> Midway.js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/prisma/" class="" aria-label="Prisma基础"><!--[--><!--]--> Prisma基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/server/" class="" aria-label="大型网站技术架构演变"><!--[--><!--]--> 大型网站技术架构演变 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/bff/" class="" aria-label="BFF 架构"><!--[--><!--]--> BFF 架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/qwik/" class="" aria-label="qwik"><!--[--><!--]--> qwik <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/electron/" class="" aria-label="electron 桌面应用"><!--[--><!--]--> electron 桌面应用 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/java/base/" class="" aria-label="java 基础"><!--[--><!--]--> java 基础 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="微信生态"><span class="title">微信生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="微信生态"><span class="title">微信生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>公众号</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/wechat/officialaccount/" class="" aria-label="公众号基础"><!--[--><!--]--> 公众号基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>小程序</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/wechat/miniprogram/" class="" aria-label="小程序基础"><!--[--><!--]--> 小程序基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/wechat/sunday_uni_app/" class="" aria-label="uni-app 新闻"><!--[--><!--]--> uni-app 新闻 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="源码解析"><span class="title">源码解析</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="源码解析"><span class="title">源码解析</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前言</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/front/why/" class="" aria-label="为什么学习源码"><!--[--><!--]--> 为什么学习源码 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/vue/vue2.x/" class="" aria-label="Vue2.x"><!--[--><!--]--> Vue2.x <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/source/vue/vue3.x/" class="" aria-label="Vue3.x"><!--[--><!--]--> Vue3.x <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="效率工具"><span class="title">效率工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="效率工具"><span class="title">效率工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/webpack/base/" class="" aria-label="Webpack 基础"><!--[--><!--]--> Webpack 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vite</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/vite/base/" class="" aria-label="Vite 基础"><!--[--><!--]--> Vite 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vscode</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/key/" class="" aria-label="Vscode 常用快捷键"><!--[--><!--]--> Vscode 常用快捷键 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/vscode-snippets/" class="" aria-label="Vscode 代码片段"><!--[--><!--]--> Vscode 代码片段 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/rest-client/" class="" aria-label="Rest Client"><!--[--><!--]--> Rest Client <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/plugins/" class="" aria-label="常用插件"><!--[--><!--]--> 常用插件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Android Studio</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/android_studio/" class="" aria-label="快捷键"><!--[--><!--]--> 快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Xcode</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/xcode/" class="" aria-label="快捷键"><!--[--><!--]--> 快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Mock</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/mock/Json-server/" class="" aria-label="json-server"><!--[--><!--]--> json-server <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>脚手架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/scaffolding/base/" class="" aria-label="脚手架 基础"><!--[--><!--]--> 脚手架 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Docker</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/docker/base/" class="" aria-label="docker 基础"><!--[--><!--]--> docker 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/docker/deploy/" class="" aria-label="常用项目部署"><!--[--><!--]--> 常用项目部署 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>AI工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/ai/copilot/" class="" aria-label="Copilot"><!--[--><!--]--> Copilot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/ai/bito/" class="" aria-label="Bito"><!--[--><!--]--> Bito <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端UI库</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/fe_ui/" class="" aria-label="前端UI库"><!--[--><!--]--> 前端UI库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/xmllein" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/js/base/" class="" aria-label="js 基础"><!--[--><!--]--> js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>TypeScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/js/ts/base/" class="" aria-label="ts 基础"><!--[--><!--]--> ts 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/js/ts/tstype/" class="" aria-label="ts 体操类型"><!--[--><!--]--> ts 体操类型 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/resource/other/" class="" aria-label="网络资源"><!--[--><!--]--> 网络资源 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/fe_performance/" class="" aria-label="网站性能优化"><!--[--><!--]--> 网站性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/git/" class="" aria-label="git常用命令"><!--[--><!--]--> git常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/linux/" class="" aria-label="linux常用命令"><!--[--><!--]--> linux常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/adb/" class="" aria-label="adb常用命令"><!--[--><!--]--> adb常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/mysql/" class="" aria-label="mysql常用命令"><!--[--><!--]--> mysql常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/mongodb/" class="" aria-label="mongodb常用命令"><!--[--><!--]--> mongodb常用命令 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>文章推荐</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202312/" class="" aria-label="2312"><!--[--><!--]--> 2312 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202311/" class="" aria-label="2311"><!--[--><!--]--> 2311 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202310/" class="" aria-label="2310"><!--[--><!--]--> 2310 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202309/" class="" aria-label="2309"><!--[--><!--]--> 2309 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202308/" class="" aria-label="2308"><!--[--><!--]--> 2308 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202307/" class="" aria-label="2307"><!--[--><!--]--> 2307 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202306/" class="" aria-label="2306"><!--[--><!--]--> 2306 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202305/" class="" aria-label="2305"><!--[--><!--]--> 2305 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202304/" class="" aria-label="2304"><!--[--><!--]--> 2304 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202212/" class="" aria-label="2212"><!--[--><!--]--> 2212 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202211/" class="" aria-label="2211"><!--[--><!--]--> 2211 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/resource/collect/202210/" class="" aria-label="2210"><!--[--><!--]--> 2210 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Css"><span class="title">Css</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Css"><span class="title">Css</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/css/layout/" class="" aria-label="Css 基础布局"><!--[--><!--]--> Css 基础布局 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/vue/base/" class="" aria-label="Vue 基础"><!--[--><!--]--> Vue 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3-notice/" class="" aria-label="Vue3 开发须知"><!--[--><!--]--> Vue3 开发须知 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3-communication/" class="" aria-label="Vue3 组件通信"><!--[--><!--]--> Vue3 组件通信 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/pinia/" class="" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue-performance/" class="" aria-label="性能优化小技巧"><!--[--><!--]--> 性能优化小技巧 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/vue/vue3/ts-antd-vite/" class="" aria-label="Ts-Antd 管理列表"><!--[--><!--]--> Ts-Antd 管理列表 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Nuxt</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/vue/nuxt/" class="" aria-label="Nuxt 基础"><!--[--><!--]--> Nuxt 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/base/" class="" aria-label="React 基础"><!--[--><!--]--> React 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/craco/" class="" aria-label="craco 配置指南"><!--[--><!--]--> craco 配置指南 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/performance/" class="" aria-label="React性能优化"><!--[--><!--]--> React性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/vueToReact/" class="" aria-label="Vue 转 React"><!--[--><!--]--> Vue 转 React <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/react-state/" class="" aria-label="React 状态管理"><!--[--><!--]--> React 状态管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/react-ts/" class="" aria-label="React+Ts"><!--[--><!--]--> React+Ts <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Umi</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/umi/umi3-antpro5-ts/" class="" aria-label="umi3"><!--[--><!--]--> umi3 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Native</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/reactnative-1/" class="" aria-label="RN 基础（上）"><!--[--><!--]--> RN 基础（上） <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/react/reactnative-2/" class="" aria-label="RN 基础（下）"><!--[--><!--]--> RN 基础（下） <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Next.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/react/nextjs/" class="" aria-label="Next.js 基础"><!--[--><!--]--> Next.js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="iOS"><span class="title">iOS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Objective-c</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/oc/" class="" aria-label="oc基础"><!--[--><!--]--> oc基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/plugins/" class="" aria-label="oc开发中常用的依赖"><!--[--><!--]--> oc开发中常用的依赖 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/oc-swift/" class="" aria-label="oc与swift混合编程"><!--[--><!--]--> oc与swift混合编程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Swift</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/swift/" class="" aria-label="swift 基础"><!--[--><!--]--> swift 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/swift-plugins/" class="" aria-label="swift开发中常用的依赖"><!--[--><!--]--> swift开发中常用的依赖 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>UI 基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/ui/" class="" aria-label="ui 基础"><!--[--><!--]--> ui 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/ios/components/" class="" aria-label="常用组件"><!--[--><!--]--> 常用组件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/ios/network/" class="" aria-label="网络 基础"><!--[--><!--]--> 网络 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Android"><span class="title">Android</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Android"><span class="title">Android</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Kotlin</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/kotlin/" class="" aria-label="kotlin 基础"><!--[--><!--]--> kotlin 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>UI控件</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/ui/" class="" aria-label="UI 基础"><!--[--><!--]--> UI 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/android/net/" class="" aria-label="网络基础"><!--[--><!--]--> 网络基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Android 四大组件</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a aria-current="page" href="/article/android/components/" class="router-link-active router-link-exact-active router-link-active" aria-label="四大组件"><!--[--><!--]--> 四大组件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Flutter"><span class="title">Flutter</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Flutter"><span class="title">Flutter</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/flutter/dart/" class="" aria-label="dart 基础"><!--[--><!--]--> dart 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/command/" class="" aria-label="常用命令与参考资料"><!--[--><!--]--> 常用命令与参考资料 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-1/" class="" aria-label="常用组件(上)"><!--[--><!--]--> 常用组件(上) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-2/" class="" aria-label="常用组件(中)"><!--[--><!--]--> 常用组件(中) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/widget-3/" class="" aria-label="常用组件(下)"><!--[--><!--]--> 常用组件(下) <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/plugins-1/" class="" aria-label="Flutter 常用插件-1"><!--[--><!--]--> Flutter 常用插件-1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/article/flutter/plugins-2/" class="" aria-label="Flutter 常用插件-2"><!--[--><!--]--> Flutter 常用插件-2 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node.js"><span class="title">Node.js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node.js"><span class="title">Node.js</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Node</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/base/" class="" aria-label="Node 基础"><!--[--><!--]--> Node 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Express</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/express/express-blog/" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Koa</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/koa/base/" class="" aria-label="Koa 基础"><!--[--><!--]--> Koa 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/koa-blog/" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/koa-restful-api/" class="" aria-label="知乎 Api"><!--[--><!--]--> 知乎 Api <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/koa/ts-sequelize/" class="" aria-label="Koa + Ts +  Sequelize"><!--[--><!--]--> Koa + Ts +  Sequelize <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Egg.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/egg/base/" class="" aria-label="Egg.js 基础"><!--[--><!--]--> Egg.js 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/egg-sequelize/" class="" aria-label="Egg.js+Sequelize"><!--[--><!--]--> Egg.js+Sequelize <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/mongo/" class="" aria-label="Egg.js+Mongoose"><!--[--><!--]--> Egg.js+Mongoose <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/egg/typeorm/" class="" aria-label="Egg.js+TypeORM"><!--[--><!--]--> Egg.js+TypeORM <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>NestJS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/nestJS/base/" class="" aria-label="NestJS 基础"><!--[--><!--]--> NestJS 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/nestJS/graphql/" class="" aria-label="NestJS + GraphQL"><!--[--><!--]--> NestJS + GraphQL <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Midway.js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/midwayJS/" class="" aria-label="Midway.js 基础"><!--[--><!--]--> Midway.js 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>其他</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/node/prisma/" class="" aria-label="Prisma基础"><!--[--><!--]--> Prisma基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/server/" class="" aria-label="大型网站技术架构演变"><!--[--><!--]--> 大型网站技术架构演变 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/bff/" class="" aria-label="BFF 架构"><!--[--><!--]--> BFF 架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/qwik/" class="" aria-label="qwik"><!--[--><!--]--> qwik <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/node/electron/" class="" aria-label="electron 桌面应用"><!--[--><!--]--> electron 桌面应用 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/article/java/base/" class="" aria-label="java 基础"><!--[--><!--]--> java 基础 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="微信生态"><span class="title">微信生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="微信生态"><span class="title">微信生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>公众号</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/wechat/officialaccount/" class="" aria-label="公众号基础"><!--[--><!--]--> 公众号基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>小程序</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/wechat/miniprogram/" class="" aria-label="小程序基础"><!--[--><!--]--> 小程序基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/wechat/sunday_uni_app/" class="" aria-label="uni-app 新闻"><!--[--><!--]--> uni-app 新闻 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="源码解析"><span class="title">源码解析</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="源码解析"><span class="title">源码解析</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前言</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/front/why/" class="" aria-label="为什么学习源码"><!--[--><!--]--> 为什么学习源码 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/vue/vue2.x/" class="" aria-label="Vue2.x"><!--[--><!--]--> Vue2.x <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/source/vue/vue3.x/" class="" aria-label="Vue3.x"><!--[--><!--]--> Vue3.x <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/source/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="效率工具"><span class="title">效率工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="效率工具"><span class="title">效率工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/webpack/base/" class="" aria-label="Webpack 基础"><!--[--><!--]--> Webpack 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vite</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/vite/base/" class="" aria-label="Vite 基础"><!--[--><!--]--> Vite 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vscode</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/key/" class="" aria-label="Vscode 常用快捷键"><!--[--><!--]--> Vscode 常用快捷键 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/vscode-snippets/" class="" aria-label="Vscode 代码片段"><!--[--><!--]--> Vscode 代码片段 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/rest-client/" class="" aria-label="Rest Client"><!--[--><!--]--> Rest Client <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/vscode/plugins/" class="" aria-label="常用插件"><!--[--><!--]--> 常用插件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Android Studio</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/android_studio/" class="" aria-label="快捷键"><!--[--><!--]--> 快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Xcode</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/xcode/" class="" aria-label="快捷键"><!--[--><!--]--> 快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Mock</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/mock/Json-server/" class="" aria-label="json-server"><!--[--><!--]--> json-server <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>脚手架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/scaffolding/base/" class="" aria-label="脚手架 基础"><!--[--><!--]--> 脚手架 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Docker</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/docker/base/" class="" aria-label="docker 基础"><!--[--><!--]--> docker 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/docker/deploy/" class="" aria-label="常用项目部署"><!--[--><!--]--> 常用项目部署 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>AI工具</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/ai/copilot/" class="" aria-label="Copilot"><!--[--><!--]--> Copilot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/article/tools/ai/bito/" class="" aria-label="Bito"><!--[--><!--]--> Bito <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端UI库</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/article/tools/fe_ui/" class="" aria-label="前端UI库"><!--[--><!--]--> 前端UI库 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/xmllein" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/article/android/kotlin/" class="sidebar-item sidebar-heading" aria-label="kotlin 基础"><!--[--><!--]--> kotlin 基础 <!--[--><!--]--></a><!----></li><li><a href="/article/android/ui/" class="sidebar-item sidebar-heading" aria-label="UI 基础"><!--[--><!--]--> UI 基础 <!--[--><!--]--></a><!----></li><li><a href="/article/android/net/" class="sidebar-item sidebar-heading" aria-label="网络基础"><!--[--><!--]--> 网络基础 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="四大组件"><!--[--><!--]--> 四大组件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#activity-相关" class="router-link-active router-link-exact-active sidebar-item" aria-label="Activity 相关"><!--[--><!--]--> Activity 相关 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#_1-activity-生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.Activity 生命周期"><!--[--><!--]--> 1.Activity 生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-activity-组件创建" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.Activity 组件创建"><!--[--><!--]--> 2.Activity 组件创建 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_3-activity-组件注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.Activity 组件注册"><!--[--><!--]--> 3.Activity 组件注册 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_4-activity-启动与参数传递" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.Activity 启动与参数传递"><!--[--><!--]--> 4.Activity 启动与参数传递 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_5-原生常见的-activtiy" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.原生常见的 Activtiy"><!--[--><!--]--> 5.原生常见的 Activtiy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_6-activity-四种启动模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. Activity 四种启动模式"><!--[--><!--]--> 6. Activity 四种启动模式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/article/android/components/#fragment" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fragment"><!--[--><!--]--> Fragment <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#_1-fragment-的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.Fragment 的生命周期"><!--[--><!--]--> 1.Fragment 的生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-fragment-的动态添加与数据传递" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Fragment 的动态添加与数据传递"><!--[--><!--]--> 2. Fragment 的动态添加与数据传递 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#设计并实现底部导航栏页面结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="设计并实现底部导航栏页面结构"><!--[--><!--]--> 设计并实现底部导航栏页面结构 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/article/android/components/#service" class="router-link-active router-link-exact-active sidebar-item" aria-label="service"><!--[--><!--]--> service <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#_1-service-启动方式与生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.Service 启动方式与生命周期"><!--[--><!--]--> 1.Service 启动方式与生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_1-2-绑定启动-bindservice" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 绑定启动 bindService()"><!--[--><!--]--> 1.2 绑定启动 bindService() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-android-8-0-及以上不允许后台启动-service-服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.Android 8.0 及以上不允许后台启动 Service 服务"><!--[--><!--]--> 2.Android 8.0 及以上不允许后台启动 Service 服务 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/article/android/components/#broadcastreciver" class="router-link-active router-link-exact-active sidebar-item" aria-label="BroadcastReciver"><!--[--><!--]--> BroadcastReciver <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#_1-两种广播类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.两种广播类型"><!--[--><!--]--> 1.两种广播类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-监听系统网络连接变化" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.监听系统网络连接变化"><!--[--><!--]--> 2.监听系统网络连接变化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-3-静态注册广播" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 静态注册广播"><!--[--><!--]--> 2.3 静态注册广播 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_3-发送自定义事件广播" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.发送自定义事件广播"><!--[--><!--]--> 3.发送自定义事件广播 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_4-系统广播" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.系统广播"><!--[--><!--]--> 4.系统广播 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/article/android/components/#contentprovider" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContentProvider"><!--[--><!--]--> ContentProvider <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/article/android/components/#_1-权限申请" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.权限申请"><!--[--><!--]--> 1.权限申请 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_2-读取通讯录联系人" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.读取通讯录联系人"><!--[--><!--]--> 2.读取通讯录联系人 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_3-通信录插入联系人" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.通信录插入联系人"><!--[--><!--]--> 3.通信录插入联系人 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_4-更新联系人信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.更新联系人信息"><!--[--><!--]--> 4.更新联系人信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_5-删除联系人" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.删除联系人"><!--[--><!--]--> 5.删除联系人 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/article/android/components/#_6-读取收件箱所有短信" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.读取收件箱所有短信"><!--[--><!--]--> 6.读取收件箱所有短信 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/article/android/components/#参考资料" class="router-link-active router-link-exact-active sidebar-item" aria-label="参考资料"><!--[--><!--]--> 参考资料 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="activity-相关" tabindex="-1"><a class="header-anchor" href="#activity-相关" aria-hidden="true">#</a> Activity 相关</h2><ul><li>Activity: 负责用户界面的展示和用户交互,学习 Activity 就要学习 Fragment，虽然它不是四大组件之一，但是它在我们的开发工作中也是频频被使用到，且必须和 Activity 一块使用，常用于分模块开发，比如慕课首页的几个 tab,每个 tab 都是对应着一个 Fragment</li></ul><p><img src="/article/images/android/kotlin/9.png" alt="Activity"></p><h3 id="_1-activity-生命周期" tabindex="-1"><a class="header-anchor" href="#_1-activity-生命周期" aria-hidden="true">#</a> 1.Activity 生命周期</h3><p><img src="/article/images/android/kotlin/10.png" alt="Activity"></p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>onCreate()</td><td>该方法会在 Activity 第一次创建时进行调用，在这个方法中通常会做 Activity 初始化相关的操作，例如：加载布局、绑定事件等</td></tr><tr><td>onStart()</td><td>这个方法会在 Activity 由不可见变为可见的时候调用，但是还不能和用户进行交互。</td></tr><tr><td>onResume()</td><td>表示 Activity 已经启动完成，进入到了前台，可以同用户进行交互了。</td></tr><tr><td>onPause()</td><td>这个方法。可以在这里释放系统资源，动画的停止，不宜在此做耗时操作。 发生场景 1.在系统准备去启动另一个 Activity 的时候调用 2.按下返回键 3.从前台切换到后台</td></tr><tr><td>onStop()</td><td>当 Activity 不可见的时候回调此方法。需要在这里释放全部用户使用不到的资源。可以做较重量级的工作，如对注册广播的解注册，对一些状态数据的存储。此时 Activity 还不会被销毁掉，而是保持在内存中，但随时都会被回收。通常发生在启动另一个 Activity 或切换到后台时 发生场景和 onPause()相同</td></tr><tr><td>onDestroy()</td><td>Activity 即将被销毁。此时必须主动释放掉所有占用的资源。</td></tr><tr><td>onReStart()</td><td>这个方法在 Activity 由停止状态变为运行状态之前调用，也就是 Activity 被重新启动了（APP 切到后台会进入 onStop(), 再切换到前台时会触发 onRestart()方法）</td></tr></tbody></table><ul><li>按 home 键 ： 运行中状态 转变 开始 执行 onPause() onStop()</li><li>返回键: onPause() —&gt; onResume()</li><li>回到这个 Activity ： 从 onStop() 转变 开始执行 onRestart() —&gt; onStart() —&gt;onResume()</li></ul><h3 id="_2-activity-组件创建" tabindex="-1"><a class="header-anchor" href="#_2-activity-组件创建" aria-hidden="true">#</a> 2.Activity 组件创建</h3><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> SecondActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>选择复写只有一个参数的 onCreate 方法</li></ul><h3 id="_3-activity-组件注册" tabindex="-1"><a class="header-anchor" href="#_3-activity-组件注册" aria-hidden="true">#</a> 3.Activity 组件注册</h3><ul><li><p>四大组件需要在 AndroidManifest 文件中配置否则无法使用，类似 Activity 无法启动，</p></li><li><p>在 AndroidManifest.xml 中注册</p></li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.SecondActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--自定义 action时一般包名.action.全大写类名--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.componentLearn.action.SECONDACTIVITY<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.DEFAULT<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--

  android:name是对应Activity的类名称
  android:exported 是否支持其它应用调用当前组件。默认值：如果包含有intent-filter 默认值为true; 没有intent-filter默认值为false
  android:label是Activity标题栏显示的内容. 现已不推荐使用
  intent-filter 是意图过滤器. 常用语隐式跳转
    action android:name 是动作名称，是指intent要执行的动作
    category android:name 是过滤器的类别， 一般情况下，每个 中都要显示指定一个默认的类别名称，即&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
 --&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>但是上面的代码中没有指定默认类别名称，这是一个例外情况，因为其 中的是&quot;android.intent.action.MAIN&quot;，意思是这个 Activity 是应用程序的入口点，这种情况下可以不加默认类别名称。</li></ul><h3 id="_4-activity-启动与参数传递" tabindex="-1"><a class="header-anchor" href="#_4-activity-启动与参数传递" aria-hidden="true">#</a> 4.Activity 启动与参数传递</h3><blockquote><p>tips 在 Android 中我们可以通过下面两种方式来启动一个新的 Activity,注意这里是怎么启动，分为显示启动和隐式启动！</p></blockquote><h4 id="_4-1-显式启动-通过包名来启动" tabindex="-1"><a class="header-anchor" href="#_4-1-显式启动-通过包名来启动" aria-hidden="true">#</a> 4.1 显式启动：通过包名来启动</h4><h5 id="无参数跳转" tabindex="-1"><a class="header-anchor" href="#无参数跳转" aria-hidden="true">#</a> 无参数跳转</h5><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>textView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
    <span class="token comment">//MainActivity@this : Context</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token label symbol">MainActivity@</span><span class="token keyword">this</span> <span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>日志 ActivityA 跳转到 ActivityB</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-03 <span class="token number">22</span>:08:59.781 <span class="token number">4562</span>-4562/com.example.componentlearn E/MainActivity:: onCreate
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:08:59.790 <span class="token number">4562</span>-4562/com.example.componentlearn E/MainActivity:: onStart
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:08:59.797 <span class="token number">4562</span>-4562/com.example.componentlearn E/MainActivity:: onResume
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:09:07.295 <span class="token number">4562</span>-4562/com.example.componentlearn E/MainActivity:: onPause
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:09:07.332 <span class="token number">4562</span>-4562/com.example.componentlearn E/SecondActivity:: onCreate
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:09:07.337 <span class="token number">4562</span>-4562/com.example.componentlearn E/SecondActivity:: onStart
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:09:07.338 <span class="token number">4562</span>-4562/com.example.componentlearn E/SecondActivity:: onResume
<span class="token number">2021</span>-11-03 <span class="token number">22</span>:09:08.009 <span class="token number">4562</span>-4562/com.example.componentlearn E/MainActivity:: onStop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="有参数跳转" tabindex="-1"><a class="header-anchor" href="#有参数跳转" aria-hidden="true">#</a> 有参数跳转</h5><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>textView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
    <span class="token comment">//有参跳转</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token label symbol">MainActivity@</span><span class="token keyword">this</span> <span class="token punctuation">,</span> SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_data&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;extra_data&quot;</span></span><span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_int_data&quot;</span></span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ActivityB 接受参数</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> stringExtra <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_data&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> intExtra <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getIntExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_int_data&quot;</span></span> <span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="期待从目标页获取数据" tabindex="-1"><a class="header-anchor" href="#期待从目标页获取数据" aria-hidden="true">#</a> 期待从目标页获取数据</h5><ul><li><p>registerForActivityResult----&gt;比如启动相册获取图片</p></li><li><p>lateinit 延迟初始化</p></li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>①假设从A<span class="token operator">--</span><span class="token operator">-&gt;</span>B页面，以registerForActivityResult方式启动
<span class="token function">registerForActivityResult</span><span class="token punctuation">(</span>
   ActivityResultContracts<span class="token punctuation">.</span><span class="token function">StartActivityForResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">{</span>result <span class="token operator">-&gt;</span>
      <span class="token keyword">val</span> <span class="token keyword">data</span> <span class="token operator">=</span> result<span class="token punctuation">.</span>data
      <span class="token keyword">val</span> resultCode <span class="token operator">=</span> result<span class="token punctuation">.</span>resultCode
      <span class="token keyword">val</span> stringExtraResult <span class="token operator">=</span> <span class="token keyword">data</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;result_extra_string&quot;</span></span><span class="token punctuation">)</span>
      <span class="token keyword">val</span> intExtraResult <span class="token operator">=</span> <span class="token keyword">data</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getIntExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;result_extra_int&quot;</span></span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
      textView<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;MainActivity result [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">resultCode</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">stringExtraResult</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ---- </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">intExtraResult</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>SecondActivity<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span><span class="token punctuation">)</span>

②如果B页面返回时，调用了
textView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
      <span class="token keyword">val</span> resultIntent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      resultIntent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;result_extra_string&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;result_extra_string&quot;</span></span><span class="token punctuation">)</span>
      resultIntent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;result_extra_int&quot;</span></span> <span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
      <span class="token function">setResult</span><span class="token punctuation">(</span>Activity<span class="token punctuation">.</span>RESULT_OK <span class="token punctuation">,</span> resultIntent<span class="token punctuation">)</span>
      <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//关闭SecondActivity 等同于点击返回键</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>tips startActivityForResult 过时用 registerForActivityResult 代替 https://www.zbug.cc/index.php/archives/registerForActivityResult.html</p></blockquote><ul><li>这个事件中两个 Activity 的生命周期</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.221 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onCreate
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.233 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onStart
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.235 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onResume
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.267 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onPause
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.705 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onCreate
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.709 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onStart
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.709 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onResume
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:12.883 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onStop
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:20.553 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onPause
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:20.565 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onRestart
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:20.568 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onStart
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:20.569 <span class="token number">4381</span>-4381/com.example.componentlearn E/MainActivity:: onResume
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:21.141 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onStop
<span class="token number">2021</span>-11-04 <span class="token number">11</span>:19:21.142 <span class="token number">4381</span>-4381/com.example.componentlearn E/SecondActivity:: onDestroy

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-隐式启动" tabindex="-1"><a class="header-anchor" href="#_4-2-隐式启动" aria-hidden="true">#</a> 4.2. 隐式启动</h4><ul><li>通过指定 action 和 category 的信息，让系统去分析这个 Intent，并找出合适的 Activity 去启动。</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.SecondActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--自定义 action时一般包名.action.全大写类名--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.componentLearn.action.SECONDACTIVITY<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.componentLearn.category.SecondActivity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.DEFAULT<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>textView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span>action <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;com.example.componentLearn.action.SECONDACTIVITY&quot;</span></span>
    intent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;com.example.componentLearn.category.SECONDACTIVITY&quot;</span></span><span class="token punctuation">)</span>

    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_data&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;extra_data&quot;</span></span><span class="token punctuation">)</span>
    intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;extra_data_int&quot;</span></span> <span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span>
    <span class="token comment">//隐式启动</span>
    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-原生常见的-activtiy" tabindex="-1"><a class="header-anchor" href="#_5-原生常见的-activtiy" aria-hidden="true">#</a> 5.原生常见的 Activtiy</h3><h4 id="拨打电话" tabindex="-1"><a class="header-anchor" href="#拨打电话" aria-hidden="true">#</a> 拨打电话</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> uri<span class="token operator">:</span> Uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;tel: 11111&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_DIAL<span class="token punctuation">,</span>uri<span class="token punctuation">)</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="发送短信" tabindex="-1"><a class="header-anchor" href="#发送短信" aria-hidden="true">#</a> 发送短信</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> uri<span class="token operator">:</span>Uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;smsto:1111&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_SENDTO <span class="token punctuation">,</span> uri<span class="token punctuation">)</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;sms_body&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;发送短信&quot;</span></span><span class="token punctuation">)</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="打开网页" tabindex="-1"><a class="header-anchor" href="#打开网页" aria-hidden="true">#</a> 打开网页</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> uri<span class="token operator">:</span>Uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;https://www.baidu.com&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_VIEW <span class="token punctuation">,</span> uri<span class="token punctuation">)</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="打开相册" tabindex="-1"><a class="header-anchor" href="#打开相册" aria-hidden="true">#</a> 打开相册</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_PICK<span class="token punctuation">)</span>
intent<span class="token punctuation">.</span>type <span class="token operator">=</span> &quot;image<span class="token comment">/*&quot;
startActivity(intent)
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="多媒体播放" tabindex="-1"><a class="header-anchor" href="#多媒体播放" aria-hidden="true">#</a> 多媒体播放</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> uri<span class="token operator">:</span>Uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>&quot;file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//sdcard/1.mp3&quot;)</span>
<span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_VIEW <span class="token punctuation">,</span> uri<span class="token punctuation">)</span>
intent<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;audio/mp3&quot;</span></span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="打开摄像头拍照" tabindex="-1"><a class="header-anchor" href="#打开摄像头拍照" aria-hidden="true">#</a> 打开摄像头拍照</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>MediaStore<span class="token punctuation">.</span>ACTION_IMAGE_CAPTURE<span class="token punctuation">)</span>
<span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token operator">&gt;</span> 在Activity的onActivityResult方法回调中取出照片数据
Bundle extras <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Bitmap bitmap <span class="token operator">=</span> <span class="token punctuation">(</span>Bitmap<span class="token punctuation">)</span> extras<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;data&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="从图库选图并剪切" tabindex="-1"><a class="header-anchor" href="#从图库选图并剪切" aria-hidden="true">#</a> 从图库选图并剪切</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">// 获取并剪切图片</span>
Intent intent <span class="token operator">=</span> new <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_GET_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>&quot;image<span class="token comment">/*&quot;);
intent.putExtra(&quot;crop&quot;, &quot;true&quot;); // 开启剪切
intent.putExtra(&quot;aspectX&quot;, 1); // 剪切的宽高比为1：2
intent.putExtra(&quot;aspectY&quot;, 2);
intent.putExtra(&quot;outputX&quot;, 20); // 保存图片的宽和高
intent.putExtra(&quot;outputY&quot;, 40);
intent.putExtra(&quot;output&quot;, Uri.fromFile(new File(&quot;/mnt/sdcard/temp&quot;))); // 保存路径
intent.putExtra(&quot;outputFormat&quot;, &quot;JPEG&quot;);// 返回格式
startActivityForResult(intent, 0);

&gt;&gt;&gt;&gt;  在Activity的onActivityResult方法中去读取保存的文件
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="剪切指定图片文件" tabindex="-1"><a class="header-anchor" href="#剪切指定图片文件" aria-hidden="true">#</a> 剪切指定图片文件</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code>Intent intent <span class="token operator">=</span> new <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;com.android.camera.action.CROP&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;com.android.camera&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;com.android.camera.CropImage&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>Uri<span class="token punctuation">.</span><span class="token function">fromFile</span><span class="token punctuation">(</span>new <span class="token function">File</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;/mnt/sdcard/temp&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;outputX&quot;</span></span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 剪切的宽高比为 1：2</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;outputY&quot;</span></span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;aspectX&quot;</span></span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保存图片的宽和高</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;aspectY&quot;</span></span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;scale&quot;</span></span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;noFaceDetection&quot;</span></span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;output&quot;</span></span><span class="token punctuation">,</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>&quot;file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//mnt/sdcard/temp&quot;));</span>
<span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token operator">&gt;</span> 在 Activity 的 onActivityResult 方法中去读取保存的文件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="进入手机的无线网络设置页面" tabindex="-1"><a class="header-anchor" href="#进入手机的无线网络设置页面" aria-hidden="true">#</a> 进入手机的无线网络设置页面</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">// 进入无线网络设置界面（其它可以举一反三）</span>
Intent intent <span class="token operator">=</span> new <span class="token function">Intent</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>Settings<span class="token punctuation">.</span>ACTION_WIRELESS_SETTINGS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-activity-四种启动模式" tabindex="-1"><a class="header-anchor" href="#_6-activity-四种启动模式" aria-hidden="true">#</a> 6. Activity 四种启动模式</h3><ul><li><p>standard</p><ul><li>标准模式</li><li>默认值，多实例模式。每启动一次，都会创建一个新的 Activity 实例。</li><li>启动的生命周期为：onCreate()-&gt;onStart()-&gt;onResume()</li></ul><p><img src="/article/images/android/kotlin/11.png" alt="Activity"></p></li><li><p>singleTop</p><ul><li><p>栈顶复用模式</p></li><li><p>如果任务栈顶已经存在需要启动的目标 Activity，则直接启动，并会回调 onNewIntent()方法，生命周期顺序为： onPause() -&gt;onNewIntent()-&gt;onResume()</p></li><li><p>如果任务栈上顶没有需要启动的目标 Activity，则创建新的实例，此时生命周期顺序为： onCreate()-&gt;onStart()-&gt;onResume()</p></li><li><p>两种情况如下图，从图中可以看出，此模式下还是会出现多实例，只要启动的目标 Activity 不在栈顶的话</p><p><img src="/article/images/android/kotlin/12.png" alt="Activity"></p></li></ul></li><li><p>singleTask</p><ul><li><p>栈内复用模式</p></li><li><p>一个任务栈只能有一个实例</p></li><li><p>有几种情况:</p><ul><li><p>当启动的 Activity 目标任务栈不存在时，则以此启动 Activity 为根 Activity 创建目标任务栈，并切换到前面</p></li><li><p>D 为 singleTask 模式</p><p><img src="/article/images/android/kotlin/14.png" alt="Activity"></p></li><li><p>当启动的 Activity 存在时，则会直接切换到 Activity 所在的任务栈，并且任务栈中在 Activity 上面的所有其他 Activity 都出栈（调用 destroy()），此时启动的 Activity 位于任务栈顶，并且会回调 onNewIntent()方法 <img src="/article/images/android/kotlin/13.png" alt="Activity"></p></li></ul></li></ul></li><li><p>singleInstance</p><ul><li>singleInstance 名称是单例模式，即 App 运行时，该 Activity 只有一个实例。既然只有一个，那么也就说明很重要、很特殊，我们需要将其“保护起来”。单例模式的“保护措施”是将其单独放到一个任务栈中</li></ul></li></ul><h2 id="fragment" tabindex="-1"><a class="header-anchor" href="#fragment" aria-hidden="true">#</a> Fragment</h2><ul><li>注意事项： Fragment 并不能单独使用，他需要嵌套在 Activity 中使用，尽管他拥有自己的生命周期，但是还是会受到宿主 Activity 的生命周期的影响，比如 Activity 被 destory 销毁了，他也会跟着销毁！一个 Activity 可以嵌套多个 Fragment</li></ul><p><img src="/article/images/android/kotlin/15.png" alt="Activity"></p><h3 id="_1-fragment-的生命周期" tabindex="-1"><a class="header-anchor" href="#_1-fragment-的生命周期" aria-hidden="true">#</a> 1.Fragment 的生命周期</h3><p><img src="/article/images/android/kotlin/16.png" alt="Activity"></p><ul><li><p>四个场景用于加深对 Fragment 生命周期的理解</p><ul><li><p>①Activity 加载 Fragment 的时候,依次调用下面的方法: onAttach -&gt; onCreate -&gt; onCreateView -&gt; onActivityCreated -&gt; onStart -&gt;onResume</p></li><li><p>② 当我们启动一个新的页面, 此时 Fragment 所在的 Activity 不可见，会执行 onPause</p></li><li><p>③ 当新页面返回后，当前 Activity 和 Fragment 又可见了，会再次执行 onStart 和 onResume</p></li><li><p>④ 退出了 Activity 的话,那么 Fragment 将会被完全结束, Fragment 会进入销毁状态 onPause -&gt; onStop -&gt; onDestoryView -&gt; onDestory -&gt; onDetach</p></li></ul><blockquote><p>onActivityCreated 已过时 常用 onCreateView 当前 fragment 所对应的视图对象 onResume 恢复动画/视频播放</p></blockquote></li></ul><h3 id="_2-fragment-的动态添加与数据传递" tabindex="-1"><a class="header-anchor" href="#_2-fragment-的动态添加与数据传递" aria-hidden="true">#</a> 2. Fragment 的动态添加与数据传递</h3><h4 id="_2-1-动态添加-fragment" tabindex="-1"><a class="header-anchor" href="#_2-1-动态添加-fragment" aria-hidden="true">#</a> 2.1 动态添加 Fragment</h4><ul><li>① 创建 Fragment</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> SecondActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_second<span class="token punctuation">)</span>


        <span class="token keyword">val</span> fragment  <span class="token operator">=</span> <span class="token function">SecondFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//事务操作对象</span>
        <span class="token keyword">val</span> ft<span class="token operator">:</span>FragmentTransaction <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ft<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>container <span class="token punctuation">,</span> fragment<span class="token punctuation">)</span>
        ft<span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-fragment-常见的操作" tabindex="-1"><a class="header-anchor" href="#_2-2-fragment-常见的操作" aria-hidden="true">#</a> 2.2 Fragment 常见的操作</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> fragment <span class="token operator">=</span> <span class="token function">StudyFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> ft <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fragment<span class="token punctuation">.</span><span class="token function">isAdded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  ft<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>container<span class="token punctuation">,</span>fragment<span class="token punctuation">)</span> <span class="token comment">//把fragment添加到事务中，当且仅当该fragment未被添加过</span>
<span class="token punctuation">}</span>
ft<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span> <span class="token comment">//显示出fragment的视图</span>
ft<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span> <span class="token comment">//隐藏fragment,使得它的视图不可见</span>
ft<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token comment">//移除fragment</span>
<span class="token comment">//替换fragment,之前添加过的fragment都会被暂时移除，把当前这个fragment添加到事务中</span>
ft<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>container<span class="token punctuation">,</span>fragment<span class="token punctuation">)</span>

<span class="token comment">//提交事务，执行对fragment的add、replace、show、hide操作</span>
ft<span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-给-fragment-传递数据" tabindex="-1"><a class="header-anchor" href="#_2-3-给-fragment-传递数据" aria-hidden="true">#</a> 2.3 给 Fragment 传递数据</h4><ul><li>Activity 传入数值</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> SecondActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_second<span class="token punctuation">)</span>

        <span class="token keyword">val</span> fragment  <span class="token operator">=</span> <span class="token function">SecondFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">//给Fragment传递数据</span>
        <span class="token keyword">val</span> bundle <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        bundle<span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;int_extra&quot;</span></span> <span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
        bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;string_extra&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;string_extra&quot;</span></span><span class="token punctuation">)</span>
        fragment<span class="token punctuation">.</span>arguments <span class="token operator">=</span> bundle

        <span class="token comment">//事务操作对象</span>
        <span class="token keyword">val</span> ft<span class="token operator">:</span>FragmentTransaction <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        ft<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>container <span class="token punctuation">,</span> fragment<span class="token punctuation">)</span>
        ft<span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Fragment 接受数据</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onViewCreated</span><span class="token punctuation">(</span>view<span class="token operator">:</span> View<span class="token punctuation">,</span> savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onViewCreated</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> savedInstanceState<span class="token punctuation">)</span>

    <span class="token keyword">val</span> intValue <span class="token operator">=</span> arguments<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;int_extra&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> strValue <span class="token operator">=</span> arguments<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;string_extra&quot;</span></span><span class="token punctuation">)</span>

    <span class="token comment">//view是onCreateView return的view</span>
    <span class="token keyword">val</span> textview <span class="token operator">=</span> view <span class="token keyword">as</span> TextView
    textview<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">intValue</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ---</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">strValue</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>思考：运行时 Fragment 如何获取 Activity 中的数据、又如何将数据传递到 Activity 中呢？ https://developer.android.com/guide/fragments/communicate?hl=zh-cn</p></blockquote><h3 id="设计并实现底部导航栏页面结构" tabindex="-1"><a class="header-anchor" href="#设计并实现底部导航栏页面结构" aria-hidden="true">#</a> 设计并实现底部导航栏页面结构</h3><h4 id="activity-页面布局" tabindex="-1"><a class="header-anchor" href="#activity-页面布局" aria-hidden="true">#</a> Activity 页面布局</h4><ul><li>此布局和如果 创建项目选择带导航栏 的样式相同</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/container<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButtonToggleGroup</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/toggle_group<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>selectionRequired</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#08000000<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>singleSelection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButton</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tab1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@style/Widget.MaterialComponents.Button.UnelevatedButton<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:color/transparent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tab1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#000000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>12sp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/ic_home_black_24dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconGravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textTop<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">tools:</span>ignore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HardcodedText<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButton</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tab2<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@style/Widget.MaterialComponents.Button.UnelevatedButton<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:color/transparent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tab2<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#000000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>12sp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/ic_notifications_black_24dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconGravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textTop<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">tools:</span>ignore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HardcodedText<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButton</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tab3<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@style/Widget.MaterialComponents.Button.UnelevatedButton<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:color/transparent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tab3<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#000000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>12sp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/ic_dashboard_black_24dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconGravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>textTop<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">app:</span>iconTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/black<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">tools:</span>ignore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HardcodedText<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com.google.android.material.button.MaterialButtonToggleGroup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>tips</li></ul><ol><li>占用父布局(除了导航栏)剩余的空间</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> android:layout_height<span class="token operator">=</span><span class="token string">&quot;0dp&quot;</span>
 android:layout_weight<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.水平平分</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>android:layout_width<span class="token operator">=</span><span class="token string">&quot;0dp&quot;</span>
android:layout_height<span class="token operator">=</span><span class="token string">&quot;wrap_content&quot;</span>
android:layout_weight<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="监听选中事件" tabindex="-1"><a class="header-anchor" href="#监听选中事件" aria-hidden="true">#</a> 监听选中事件</h4><ul><li>在 onCreate 方法中</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">//改变选中按钮的颜色</span>
binding<span class="token punctuation">.</span>toggleGroup<span class="token punctuation">.</span><span class="token function">addOnButtonCheckedListener</span> <span class="token punctuation">{</span> group<span class="token operator">:</span>MaterialButtonToggleGroup<span class="token punctuation">,</span> checkedId<span class="token operator">:</span>Int <span class="token punctuation">,</span> isChecked<span class="token operator">:</span>Boolean <span class="token operator">-&gt;</span>
    <span class="token keyword">val</span> childCount <span class="token operator">=</span> group<span class="token punctuation">.</span>childCount
    <span class="token keyword">var</span> selectIndex <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> <span class="token number">0</span> until childCount<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">val</span> button <span class="token operator">=</span> group<span class="token punctuation">.</span><span class="token function">getChildAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token keyword">as</span> MaterialButton
        <span class="token keyword">if</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span>id <span class="token operator">==</span> checkedId<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//选中的按钮变红</span>
            selectIndex <span class="token operator">=</span> index
            button<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>CYAN<span class="token punctuation">)</span>
            button<span class="token punctuation">.</span>iconTint <span class="token operator">=</span> ColorStateList<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>CYAN<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            button<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>BLACK<span class="token punctuation">)</span>
            button<span class="token punctuation">.</span>iconTint <span class="token operator">=</span> ColorStateList<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>BLACK<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">switchFragment</span><span class="token punctuation">(</span>selectIndex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
binding<span class="token punctuation">.</span>toggleGroup<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>tab1<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="导航栏切换动态切换显示的-fragment" tabindex="-1"><a class="header-anchor" href="#导航栏切换动态切换显示的-fragment" aria-hidden="true">#</a> 导航栏切换动态切换显示的 fragment</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">var</span> tab1Fragment<span class="token operator">:</span>SecondFragment<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>
<span class="token keyword">private</span> <span class="token keyword">var</span> tab2Fragment<span class="token operator">:</span>SecondFragment<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>
<span class="token keyword">private</span> <span class="token keyword">var</span> tab3Fragment<span class="token operator">:</span>SecondFragment<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>
<span class="token keyword">private</span> <span class="token keyword">var</span> shownFragment<span class="token operator">:</span>Fragment <span class="token operator">?</span><span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//当前正在显示的Fragment</span>

<span class="token comment">//切换Fragment</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">switchFragment</span><span class="token punctuation">(</span>selectIndex<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//根据选中tab的id返回fragment</span>
     <span class="token keyword">val</span> fragment <span class="token operator">=</span> <span class="token keyword">when</span><span class="token punctuation">(</span>selectIndex<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token number">0</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>tab1Fragment <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                tab1Fragment <span class="token operator">=</span> <span class="token function">SecondFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> bundle <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;tab&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;tab1&quot;</span></span><span class="token punctuation">)</span>
                tab1Fragment<span class="token operator">!!</span><span class="token punctuation">.</span>arguments <span class="token operator">=</span> bundle
            <span class="token punctuation">}</span>
            tab1Fragment
        <span class="token punctuation">}</span><span class="token number">1</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>tab2Fragment <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                tab2Fragment <span class="token operator">=</span> <span class="token function">SecondFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> bundle <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;tab&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;tab2&quot;</span></span><span class="token punctuation">)</span>
                tab2Fragment<span class="token operator">!!</span><span class="token punctuation">.</span>arguments <span class="token operator">=</span> bundle
            <span class="token punctuation">}</span>
            tab2Fragment
        <span class="token punctuation">}</span><span class="token number">2</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>tab3Fragment <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                tab3Fragment <span class="token operator">=</span> <span class="token function">SecondFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> bundle <span class="token operator">=</span> <span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;tab&quot;</span></span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;tab3&quot;</span></span><span class="token punctuation">)</span>
                tab3Fragment<span class="token operator">!!</span><span class="token punctuation">.</span>arguments <span class="token operator">=</span> bundle
            <span class="token punctuation">}</span>
            tab3Fragment
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">IllegalStateException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;下标不符合预期&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token operator">?:</span><span class="token keyword">return</span>


    <span class="token keyword">val</span> ft <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>fragment<span class="token punctuation">.</span>isAdded<span class="token punctuation">)</span><span class="token punctuation">{</span>
        ft<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>container <span class="token punctuation">,</span> fragment<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    ft<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>
    <span class="token comment">//避免出现多个fragment重叠</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>shownFragment <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ft<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span>shownFragment<span class="token operator">!!</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    shownFragment <span class="token operator">=</span> fragment
    ft<span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="本例中多个-fragment-的生命周期" tabindex="-1"><a class="header-anchor" href="#本例中多个-fragment-的生命周期" aria-hidden="true">#</a> 本例中多个 fragment 的生命周期</h4><ul><li>第一次点击各个 tab 每个 fragment onAttach----&gt; onResume</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:22.661 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onAttach
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:22.662 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreate
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:22.665 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreateView
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:22.675 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onStart
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:22.679 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onResume
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.570 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab1-- <span class="token boolean">true</span>
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.573 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onAttach
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.574 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreate
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.575 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreateView
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.576 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onStart
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:24.577 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onResume
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.737 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab2-- <span class="token boolean">true</span>
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.739 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onAttach
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.740 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreate
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.741 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onCreateView
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.741 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onStart
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:34:25.745 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onResume
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>tab3 切换 tab2</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-11 <span class="token number">16</span>:35:53.583 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab3-- <span class="token boolean">true</span>
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:35:53.584 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab2-- <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>tab2 切换 tab1</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-11 <span class="token number">16</span>:35:55.533 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab2-- <span class="token boolean">true</span>
<span class="token number">2021</span>-11-11 <span class="token number">16</span>:35:55.533 <span class="token number">5666</span>-5666/com.example.componentlearn E/SecondFragment: onHiddenChanged <span class="token builtin class-name">:</span> tab1-- <span class="token boolean">false</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>当且仅当 activity 存在多个 fragment ， 并且我们调用了 show - hide</li><li>fragment 的生命周期会调用</li><li><code>override fun onHiddenChanged(hidden: Boolean)</code></li><li>不可见为 true , 可见为 false</li></ul><h2 id="service" tabindex="-1"><a class="header-anchor" href="#service" aria-hidden="true">#</a> service</h2><ul><li><strong>Service 服务</strong>不需要和用户交互，且需要长期运行任务的解决方案。负责后台任务，比如播放音乐，socket 长连接 Service 启动后默认是运行在主线程中,在执行具体耗时任务过程中要手动开启子线程,应用程序进程被杀死,所有依赖该进程的 Service 服务也会停止运行。</li></ul><p><img src="/article/images/android/kotlin/17.png" alt="Activity"></p><h3 id="_1-service-启动方式与生命周期" tabindex="-1"><a class="header-anchor" href="#_1-service-启动方式与生命周期" aria-hidden="true">#</a> 1.Service 启动方式与生命周期</h3><ul><li>Service 启动方式分为两种，普通启动 startService 、绑定启动 bindService</li></ul><p><img src="/article/images/android/kotlin/18.png" alt="Activity"></p><h4 id="_1-1-普通启动-startservice" tabindex="-1"><a class="header-anchor" href="#_1-1-普通启动-startservice" aria-hidden="true">#</a> 1.1 普通启动 startService()</h4><ul><li>一般用于创建一个长时间持续运行的后台任务的时候才会使用，比如说 socket,文件上传下载服务</li></ul><blockquote><p>普通启动 startService()，它的生命周期和应用程序的生命周期一样长，只要应用程序不被杀死，服务就会一直运行 ，除非我们使用 stopService()</p></blockquote><ul><li><p>① 首次启动会创建一个 Service 实例,依次调用 onCreate()和 onStartCommand()方法,此时 Service 进入运行状态</p></li><li><p>② 如果再次调用 StartService 启动 Service,将不会再创建新的 Service 对象, 系统会直接复用前面创建的 Service 对象,调用它的 onStartCommand()方法！</p></li><li><p>③ 这样的 Service 与它的调用者无必然的联系,就是说当调用者结束了自己的生命周期, 但是只要不调用 stopService,那么 Service 还是会继续运行的!</p></li><li><p>④ 无论启动了多少次 Service,只需调用一次 StopService 即可停掉 Service</p></li></ul><h4 id="定义-service-服务" tabindex="-1"><a class="header-anchor" href="#定义-service-服务" aria-hidden="true">#</a> 定义 Service 服务</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestService1 <span class="token operator">:</span> <span class="token function">Service</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> TAG <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;TestService1&quot;</span></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onCreate&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onBind</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> IBinder<span class="token operator">?</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onBind&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStartCommand</span><span class="token punctuation">(</span>intent<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">,</span> flags<span class="token operator">:</span> Int<span class="token punctuation">,</span> startId<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onStartCommand&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStartCommand</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> flags<span class="token punctuation">,</span> startId<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onDestroy&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>AndroidManifest.xml 完成 Service 注册</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.TestService1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="在-avtivity-中-startservice-启动服务-要在-androidmanifest-注册" tabindex="-1"><a class="header-anchor" href="#在-avtivity-中-startservice-启动服务-要在-androidmanifest-注册" aria-hidden="true">#</a> 在 Avtivity 中 StartService 启动服务 (要在 AndroidManifest 注册)</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding <span class="token operator">:</span> ActivityTestServiceBinding

<span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

    binding <span class="token operator">=</span> ActivityTestServiceBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

    <span class="token comment">//启动服务</span>
    binding<span class="token punctuation">.</span>startService<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token punctuation">,</span> TestService1<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
        <span class="token function">startService</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//停止服务</span>
    binding<span class="token punctuation">.</span>stopService<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token punctuation">,</span> TestService1<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
        <span class="token function">stopService</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="日志输出与结果分析" tabindex="-1"><a class="header-anchor" href="#日志输出与结果分析" aria-hidden="true">#</a> 日志输出与结果分析</h4><ul><li>对于使用 startService 的方式而言，onStartCommand 就是我们用于做后台任务的地方，如果我们多次点击 startService 按钮，会直接调 onStartCommand,而不再回调 onCreate</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>//第一次点击startService
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:16.274 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onCreate
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:16.275 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onStartCommand

//第二次点击startService
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:20.167 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onStartCommand

//第三次点击startService
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:21.579 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onStartCommand

//点击stopSevice
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:22.612 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onDestroy

//第四次点击startService
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:24.957 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onCreate
<span class="token number">2021</span>-11-11 <span class="token number">22</span>:37:24.959 <span class="token number">6417</span>-6417/com.example.componentlearn E/TestService1: onStartCommand

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-绑定启动-bindservice" tabindex="-1"><a class="header-anchor" href="#_1-2-绑定启动-bindservice" aria-hidden="true">#</a> 1.2 绑定启动 bindService()</h3><blockquote><p>运行一些和 Activity 生命周期相等的后台任务，如跨进程的通信</p></blockquote><ul><li><p>① 当首次使用 bindService()启动一个 Service 时,系统会实例化一个 Service 实例,并调用其**onCreate()和 onBind()**方法,然后调用者就可以通过返回的 IBinder 对象和 Service 进行交互了,此后如果我们再次使用 bindService 绑定 Service,系统不会创建新的 Sevice 实例,也不会再调用 onBind()方法,只会直接把 IBinder 对象返回给调用方</p></li><li><p>② 如果我们解除与服务的绑定,只需调用 unbindService(),此时 onUnbind 和 onDestory 方法将会被调用</p></li><li><p>③bindService 启动的 Service 服务是与调用者(Activity)相互关联的,可以理解为 “一条绳子上的蚂蚱”,要死一起死,在 bindService 后,一旦调用者(Activity)销毁,那么 Service 也立即终止</p></li></ul><h4 id="定义-service-服务-1" tabindex="-1"><a class="header-anchor" href="#定义-service-服务-1" aria-hidden="true">#</a> 定义 Service 服务</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestService2 <span class="token operator">:</span> <span class="token function">Service</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> TAG <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;TestService2&quot;</span></span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> quit <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">//标记位 线程退出</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onCreate&quot;</span></span><span class="token punctuation">)</span>

        <span class="token comment">//线程开启</span>
        <span class="token function">Thread</span><span class="token punctuation">(</span>Runnable <span class="token punctuation">{</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>quit<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
                count<span class="token operator">++</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> binder <span class="token operator">=</span> <span class="token function">MyBinder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">//内部类 继承Binder类 ，Binder类实现IBinder</span>
    <span class="token keyword">inner</span> <span class="token keyword">class</span> MyBinder <span class="token operator">:</span> <span class="token function">Binder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">fun</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> Int<span class="token punctuation">{</span>
            <span class="token keyword">return</span> count
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onBind</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> IBinder<span class="token operator">?</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onBind&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> binder
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onUnbind</span><span class="token punctuation">(</span>intent<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onUnbind&quot;</span></span><span class="token punctuation">)</span>
        quit <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onUnbind</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;onDestroy&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="androidmanifest-xml-中注册服务" tabindex="-1"><a class="header-anchor" href="#androidmanifest-xml-中注册服务" aria-hidden="true">#</a> AndroidManifest.xml 中注册服务</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.TestService2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="在-activity-中-bindservice-启动服务" tabindex="-1"><a class="header-anchor" href="#在-activity-中-bindservice-启动服务" aria-hidden="true">#</a> 在 Activity 中 bindService 启动服务</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestServiceActivity <span class="token operator">:</span> <span class="token function">Activity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> binding <span class="token operator">:</span> ActivityTestServiceBinding
    <span class="token keyword">private</span> <span class="token keyword">var</span> connection<span class="token operator">:</span> ServiceConnection<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> myBinder<span class="token operator">:</span> TestService2<span class="token punctuation">.</span>MyBinder<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

        binding <span class="token operator">=</span> ActivityTestServiceBinding<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>layoutInflater<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>root<span class="token punctuation">)</span>

        connection <span class="token operator">=</span> <span class="token keyword">object</span><span class="token operator">:</span>ServiceConnection<span class="token punctuation">{</span>
            <span class="token comment">//Activity与Service连接成功时回调该方法</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onServiceConnected</span><span class="token punctuation">(</span>name<span class="token operator">:</span> ComponentName<span class="token operator">?</span><span class="token punctuation">,</span> service<span class="token operator">:</span> IBinder<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;TestService2&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;--------------Service  Connected--------------&quot;</span></span><span class="token punctuation">)</span>
                myBinder <span class="token operator">=</span> service <span class="token keyword">as</span> TestService2<span class="token punctuation">.</span>MyBinder
            <span class="token punctuation">}</span>

            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onServiceDisconnected</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> ComponentName<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//Activity与Service断开连接时回调该方法</span>
                Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;TestService2&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;--------------Service  Disconnected--------------&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>

        <span class="token comment">//绑定service</span>
        <span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token punctuation">,</span> TestService2<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
        <span class="token function">bindService</span><span class="token punctuation">(</span>intent <span class="token punctuation">,</span> connection<span class="token operator">!!</span> <span class="token punctuation">,</span> Context<span class="token punctuation">.</span>BIND_AUTO_CREATE<span class="token punctuation">)</span>

        <span class="token comment">//启动服务</span>
        binding<span class="token punctuation">.</span>startService<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
<span class="token comment">/*            val intent = Intent(this , TestService1::class.java)
            startService(intent)*/</span>

            Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;TestService2&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;*********** getCount:=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">myBinder<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ***********&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//停止服务</span>
        binding<span class="token punctuation">.</span>stopService<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>
            <span class="token comment">//普通启动starService()</span>
<span class="token comment">/*            val intent = Intent(this , TestService1::class.java)
            stopService(intent)*/</span>

            <span class="token comment">//绑定启动bindService()</span>
            <span class="token function">unbindService</span><span class="token punctuation">(</span>connection<span class="token operator">!!</span><span class="token punctuation">)</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//否则Activity会发生内存泄露</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">unbindService</span><span class="token punctuation">(</span>connection<span class="token operator">!!</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="日志输出与结果分析-1" tabindex="-1"><a class="header-anchor" href="#日志输出与结果分析-1" aria-hidden="true">#</a> 日志输出与结果分析</h4><ul><li>可以在 onCreate(),onBind() 开启耗时任务如线程</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:33.264 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: onCreate
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:33.266 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: onBind
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:34.069 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: --------------Service  Connected--------------
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:34.976 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: *********** getCount:<span class="token operator">=</span><span class="token number">1</span> ***********
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:36.415 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: *********** getCount:<span class="token operator">=</span><span class="token number">3</span> ***********
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:37.134 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: *********** getCount:<span class="token operator">=</span><span class="token number">3</span> ***********
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:38.562 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: *********** getCount:<span class="token operator">=</span><span class="token number">5</span> ***********
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:43.267 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: onUnbind
<span class="token number">2021</span>-11-13 <span class="token number">11</span>:25:43.267 <span class="token number">5247</span>-5247/com.example.componentlearn E/TestService2: onDestroy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用 BindService 绑定 Service,依次调用 onCreate(),onBind()方法, 我们可以在 onBind()方法中返回自定义的 IBinder 对象;再接着调用的是 ServiceConnection 的 onServiceConnected()方法该方法中可以获得 IBinder 对象,从而进行相关操作;当 Service 解除绑定后会自动调用 onUnbind 和 onDestroyed 方法,当然绑定多客户端情况需要解除所有 的绑定才会调用 onDestoryed 方法进行销毁哦</li></ul><h3 id="_2-android-8-0-及以上不允许后台启动-service-服务" tabindex="-1"><a class="header-anchor" href="#_2-android-8-0-及以上不允许后台启动-service-服务" aria-hidden="true">#</a> 2.Android 8.0 及以上不允许后台启动 Service 服务</h3><blockquote><p>Android 8.0 还对特定函数做出了以下变更：</p></blockquote><ul><li><p>1.如果针对 Android 8.0 的应用尝试在不允许其创建后台服务的情况下使用 startService() 函数，则该函数将引发一个 IllegalStateException</p></li><li><p>2.新的 Context.startForegroundService() 函数将启动一个前台服务。现在，即使应用在后台运行，系统也允许其调用 Context.startForegroundService()。不过，应用必须在创建服务后的五秒内调用该服务的 startForeground() 函数</p></li><li><p>软件不可见后台超过 60s 不可启动 service</p></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2021</span>-11-14 <span class="token number">14</span>:24:34.213 <span class="token number">3846</span>-3846/com.example.componentlearn E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.example.componentlearn, PID: <span class="token number">3846</span>
    java.lang.IllegalStateException: Not allowed to start <span class="token function">service</span> Intent <span class="token punctuation">{</span> <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.example.componentlearn/.TestService2 <span class="token punctuation">}</span>: app is <span class="token keyword">in</span> background uid UidRecord<span class="token punctuation">{</span>89692e9 u0a121 LAST bg:+1m7s709ms idle change:cached procs:1 seq<span class="token punctuation">(</span><span class="token number">0,0</span>,0<span class="token punctuation">)</span><span class="token punctuation">}</span>
        at android.app.ContextImpl.startServiceCommon<span class="token punctuation">(</span>ContextImpl.java:1715<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="androidmanifest-xml-声明权限" tabindex="-1"><a class="header-anchor" href="#androidmanifest-xml-声明权限" aria-hidden="true">#</a> AndroidManifest.xml 声明权限</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.FOREGROUND_SERVICE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="服务启动兼容写法" tabindex="-1"><a class="header-anchor" href="#服务启动兼容写法" aria-hidden="true">#</a> 服务启动兼容写法</h4><ul><li>TestServiceActivity 的 onCreate()</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Build<span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">&gt;=</span> Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>O<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//安卓版本高于8.0   26或者Build.VERSION_CODES.O</span>
    <span class="token function">startForegroundService</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token function">startService</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>TestService2 中的 onCreate</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Build<span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">&gt;=</span> Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>O<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> notification <span class="token operator">=</span> Notification<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;channel_id&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">startForeground</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>notification<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="broadcastreciver" tabindex="-1"><a class="header-anchor" href="#broadcastreciver" aria-hidden="true">#</a> BroadcastReciver</h2><ul><li><p>BroadcastReceiver 广播接收者: 负责页面间通信(如两个 acticity 之间)，系统和 APP 通信，APP 和 APP 通信，比如监听网络连接状态变化，就是通过 BroadcastReceiver 广播接收者来实现的</p></li><li><p>Android 中， 系统自己在很多时候都会发送广播，比如电量变化，wifi 连接变化，插入耳机，输入法改变等，系统都会发送广播，这个叫系统广播。此时系统就是广播发送者</p></li><li><p>APP 想要收到这些广播，这个时候我们只需要注册一个 BroadcastReceiver，当 wifi 连接发生变化，我们注册的广播就会收到通知~。此时我们的 APP 就是广播接收者</p></li><li><p>我们也可以自己发广播，比如：登录成功后发出广播，监听这个广播的接收者就可以做些刷新页面的动作。此时我们的 APP 既是广播发送者，也是广播接收者</p></li></ul><h3 id="_1-两种广播类型" tabindex="-1"><a class="header-anchor" href="#_1-两种广播类型" aria-hidden="true">#</a> 1.两种广播类型</h3><ul><li>标准广播：发出广播后，该广播事件的接收者，几乎会在同一时刻收到通知，都可以响应或不响应该事件</li><li>有序广播：发出广播后，同一时刻，只有一个广播接收者能收到、一个接收者处理完后之后，可以选择继续向下传递给其它接收者，也可以拦截掉广播。[不常用、不推荐使用了 5.0 以下]</li></ul><h3 id="_2-监听系统网络连接变化" tabindex="-1"><a class="header-anchor" href="#_2-监听系统网络连接变化" aria-hidden="true">#</a> 2.监听系统网络连接变化</h3><h4 id="_2-1-定义一个广播接收者" tabindex="-1"><a class="header-anchor" href="#_2-1-定义一个广播接收者" aria-hidden="true">#</a> 2.1 定义一个广播接收者</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestBroadcastReceiver <span class="token operator">:</span> <span class="token function">BroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token operator">?</span><span class="token punctuation">,</span> intent<span class="token operator">:</span> Intent<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//intent事件类型</span>
        <span class="token keyword">val</span> action <span class="token operator">=</span> intent<span class="token operator">?</span><span class="token punctuation">.</span>action<span class="token operator">?:</span><span class="token keyword">return</span> <span class="token comment">//如果为空则不处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>action <span class="token operator">==</span> ConnectivityManager<span class="token punctuation">.</span>CONNECTIVITY_ACTION<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">val</span> connectivityManager <span class="token operator">=</span> context<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span>Context<span class="token punctuation">.</span>CONNECTIVITY_SERVICE<span class="token punctuation">)</span> <span class="token keyword">as</span> ConnectivityManager
            <span class="token keyword">val</span> info <span class="token operator">=</span> connectivityManager<span class="token punctuation">.</span>activeNetworkInfo <span class="token comment">//获取网络连接类型</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>info<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> info<span class="token punctuation">.</span>isAvailable<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//有网络连接的</span>
                <span class="token keyword">val</span> typeName <span class="token operator">=</span>info<span class="token punctuation">.</span>typeName
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token operator">!!</span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;当前网络连接类型</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">typeName</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token punctuation">,</span>  Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token operator">!!</span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;当前无网络连接&quot;</span></span> <span class="token punctuation">,</span>  Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-运行时动态注册广播接收事件" tabindex="-1"><a class="header-anchor" href="#_2-2-运行时动态注册广播接收事件" aria-hidden="true">#</a> 2.2 运行时动态注册广播接收事件</h4><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestBroadcastReceiverActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> receiver<span class="token operator">:</span> TestBroadcastReceiver

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

        receiver <span class="token operator">=</span> <span class="token function">TestBroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">val</span> intentFilter <span class="token operator">=</span> <span class="token function">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        intentFilter<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span>ConnectivityManager<span class="token punctuation">.</span>CONNECTIVITY_ACTION<span class="token punctuation">)</span>

        <span class="token function">registerReceiver</span><span class="token punctuation">(</span>receiver <span class="token punctuation">,</span> intentFilter<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 必须要在onDestroy时反注册，否则会内存泄漏</span>
        <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>不要忘记在 AndroidManifest.xml 中注册 TestBroadcastReceiverActivity 不要在收到广播后进行任何耗时操作,因为在广播中是不允许开辟线程的(默认主线程), 当 onReceiver( )方法运行较长时间(超过 10 秒)还没有结束的话,那么程序会报错(ANR), 广播更多的时候扮演的是一个打开其他组件的角色,比如启动 Service,Notification 提示, Activity 等！</p></blockquote><h3 id="_2-3-静态注册广播" tabindex="-1"><a class="header-anchor" href="#_2-3-静态注册广播" aria-hidden="true">#</a> 2.3 静态注册广播</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.components.TestBroadcastReceiver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span> <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.net.conn.CONNECTIVITY_CHANGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>从 android 8.0（API26）开始，对清单文件中静态注册广播接收者增加了限制，建议大家不要在清单文件中静态注册广播接收者,可以静态注册的是 自定义的广播事件或者一些系统级别的广播如：是否开机、电池电量</p></blockquote><h4 id="解决静态注册广播接收者收不到事件的问题" tabindex="-1"><a class="header-anchor" href="#解决静态注册广播接收者收不到事件的问题" aria-hidden="true">#</a> 解决静态注册广播接收者收不到事件的问题</h4><ul><li>虽然从 Android8.0 开始，系统明确限制了静态广播注册去监听系统行为，但是应用自己定义的的广播事件还是可以使用静态注册的</li></ul><h4 id="androidmanifest-xml-中注册" tabindex="-1"><a class="header-anchor" href="#androidmanifest-xml-中注册" aria-hidden="true">#</a> AndroidManifest.xml 中注册</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--静态注册广播--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.TestBroadcastReceiver<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.componentLearn.TEST_BROADCAST_RECEVIER<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>TestBroadcastReceiverActivity 的 onCreate</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
intent<span class="token punctuation">.</span>action <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;com.example.componentLearn.TEST_BROADCAST_RECEIVER&quot;</span></span>
<span class="token comment">// 下面这一行在Android 7.0及以下版本不是必须的，但是Android 8.0或者更高版本，发送广播的条件更加严苛，必须添加这一行内容。</span>
<span class="token comment">// 创建的ComponentName实例化对象有两个参数，第1个参数是指接收广播类的包名，第2个参数是指接收 广播类 的完整类名。</span>
intent<span class="token punctuation">.</span>component <span class="token operator">=</span> <span class="token function">ComponentName</span><span class="token punctuation">(</span>packageName<span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;com.example.componentlearn.TestBroadcastReceiver&quot;</span></span><span class="token punctuation">)</span>
<span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-发送自定义事件广播" tabindex="-1"><a class="header-anchor" href="#_3-发送自定义事件广播" aria-hidden="true">#</a> 3.发送自定义事件广播</h3><h4 id="_3-1-全局发送广播" tabindex="-1"><a class="header-anchor" href="#_3-1-全局发送广播" aria-hidden="true">#</a> 3.1 全局发送广播</h4><ul><li><p>全局发送广播，如果别人家 App 也注册了该事件监听，也能收到(信息泄露)，比较不合理。</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>new <span class="token function">Intent</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;com.example.firstapp.component.TEST_BROADCAST_RECEVIER&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_3-2-应用内发送广播" tabindex="-1"><a class="header-anchor" href="#_3-2-应用内发送广播" aria-hidden="true">#</a> 3.2 应用内发送广播</h4><ul><li>1.App 应用内广播可理解为一种局部广播，广播的发送者和接收者都同属于一个 App</li><li>2.相比于全局广播（普通广播），App 应用内广播优势体现在：安全性高 &amp; 效率高</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">// 使用LocalBroadcastManager来注册应用内广播</span>
LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span>myReceiver<span class="token punctuation">,</span> itFilter<span class="token punctuation">)</span>

<span class="token comment">// 使用LocalBroadcastManager来发送应用内广播</span>
LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-系统广播" tabindex="-1"><a class="header-anchor" href="#_4-系统广播" aria-hidden="true">#</a> 4.系统广播</h3><ul><li>Android 中内置了多个系统广播：只要涉及到手机的基本操作（如开机、网络状态变化、拍照等等），都会发出相应的广播</li><li>每个广播都有特定的 Intent - Filter（包括具体的 action），Android 系统广播 action 如下</li></ul><table><thead><tr><th style="text-align:left;">操作系统</th><th style="text-align:left;">action</th></tr></thead><tbody><tr><td style="text-align:left;">开机, 系统启动完成后(仅广播一次)</td><td style="text-align:left;">android.intent.action.BOOT_COMPLETED</td></tr><tr><td style="text-align:left;">网络状态变化</td><td style="text-align:left;">android.net.conn.CONNECTIVITY_CHANGE</td></tr><tr><td style="text-align:left;">关闭或打开飞行模式</td><td style="text-align:left;">Intent.ACTION_AIRPLANE_MODE_CHANGED</td></tr><tr><td style="text-align:left;">充电时或电量发生变化</td><td style="text-align:left;">Intent.ACTION_BATTERY_CHANGED</td></tr><tr><td style="text-align:left;">拍照</td><td style="text-align:left;">Intent.ACTION_CAMERA_BUTTON</td></tr><tr><td style="text-align:left;">电池电量充足（即从电量低变化到饱满时会发出广播</td><td style="text-align:left;">intent.action.BATTERY_OKAY</td></tr><tr><td style="text-align:left;">电池电量低（即从电量充足变化到低时会发出广播</td><td style="text-align:left;">intent.action.BATTERY_LOW</td></tr><tr><td style="text-align:left;">屏幕锁屏</td><td style="text-align:left;">Intent.ACTION_CLOSE_SYSTEM_DIALOGS</td></tr><tr><td style="text-align:left;">日期改变</td><td style="text-align:left;">Intent.ACTION_DATE_CHANGED</td></tr><tr><td style="text-align:left;">时间改变</td><td style="text-align:left;">Intent.ACTION_TIME_CHANGED</td></tr><tr><td style="text-align:left;">时区改变</td><td style="text-align:left;">Intent.ACTION_TIMEZONE_CHANGED</td></tr><tr><td style="text-align:left;">电话状态改变</td><td style="text-align:left;">TelephonyManager.ACTION_PHONE_STATE_CHANGED</td></tr><tr><td style="text-align:left;">插入耳机时</td><td style="text-align:left;">Intent.ACTION_HEADSET_PLUG</td></tr><tr><td style="text-align:left;">成功安装 APK</td><td style="text-align:left;">Intent.ACTION_PACKAGE_ADDED</td></tr><tr><td style="text-align:left;">卸载 APK</td><td style="text-align:left;">Intent.ACTION_PACKAGE_REMOVED</td></tr><tr><td style="text-align:left;">语言改变</td><td style="text-align:left;">Intent.ACTION_LOCALE_CHANGED</td></tr></tbody></table><h2 id="contentprovider" tabindex="-1"><a class="header-anchor" href="#contentprovider" aria-hidden="true">#</a> ContentProvider</h2><ul><li>ContentProvider 内容提供者: 负责数据存取，常用于 APP 进数据共享，跨进程数据存取等…比如读取相册，读取联系人，都是 ContentProvider 来实现的</li></ul><blockquote><p>**1.**我们想在自己的应用中访问别的应用，或者说一些 ContentProvider 暴露给我们的一些数据， 比如手机联系&gt;人，短信、相册等！我们想对这些数据进行读取或者修改，这就需要用到 ContentProvider 了！ **2.**我们自己的应用，想把自己的一些数据暴露出来，给其他的应用进行读取或操作，我们也可以用到 ContentProvider，另外我们可以选择要暴露的数据，就避免了我们隐私数据的的泄露！</p></blockquote><p><img src="/article/images/android/kotlin/19.png" alt="ContentProvider"></p><h3 id="_1-权限申请" tabindex="-1"><a class="header-anchor" href="#_1-权限申请" aria-hidden="true">#</a> 1.权限申请</h3><blockquote><p>从 android6.0 开始，凡是涉及用户隐私的权限(读写短信，读写联系人，拍摄，录音等等)，都需要运行时申请，弹窗提醒用户是否授权。用户不授权则无法继续操作</p></blockquote><ul><li><p>首先在 AndroidManifest.xml 中声明读取通信录的权限</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_CONTACTS<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>运行时动态申请权限，请求用户授权</p></li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> TestContentProviderActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

        <span class="token comment">//判断读取通讯录的允许</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token punctuation">,</span> android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>READ_CONTACTS<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//如果未授权</span>
            ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span>
                <span class="token keyword">this</span> <span class="token punctuation">,</span>
                <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>READ_CONTACTS<span class="token punctuation">)</span> <span class="token punctuation">,</span>
                <span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//读取联系人</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//读取联系人</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;getContacts&quot;</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span>
        requestCode<span class="token operator">:</span> Int<span class="token punctuation">,</span>
        permissions<span class="token operator">:</span> Array<span class="token operator">&lt;</span><span class="token keyword">out</span> String<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        grantResults<span class="token operator">:</span> IntArray
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> permissions<span class="token punctuation">,</span> grantResults<span class="token punctuation">)</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>requestCode<span class="token operator">==</span><span class="token number">100</span> <span class="token operator">&amp;&amp;</span> permissions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>READ_CONTACTS<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>grantResults<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//表示授予权限</span>
                <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;读取通讯录的权限被拒绝，程序将无法继续工作&quot;</span></span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-读取通讯录联系人" tabindex="-1"><a class="header-anchor" href="#_2-读取通讯录联系人" aria-hidden="true">#</a> 2.读取通讯录联系人</h3><table><thead><tr><th style="text-align:left;">表名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">content://com.android.contacts/data/phones</td><td style="text-align:left;">读取联系人的表的名字</td></tr></tbody></table><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">display_name</td><td style="text-align:left;">联系人名</td></tr><tr><td style="text-align:left;">data1</td><td style="text-align:left;">电话号码</td></tr></tbody></table><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">//读取联系人</span>
<span class="token annotation builtin">@SuppressLint</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Range&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//查询对象</span>
    <span class="token keyword">val</span> resolver <span class="token operator">=</span> contentResolver
    <span class="token comment">//格式化一个uri</span>
    <span class="token keyword">val</span> uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;content://com.android.contacts/data/phones&quot;</span></span><span class="token punctuation">)</span>
    <span class="token comment">//得到一个游标</span>
    <span class="token keyword">val</span> cursor <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?:</span><span class="token keyword">return</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取联系人名字和号码</span>
        <span class="token keyword">val</span> displayName <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>DISPLAY_NAME<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> phoneNumber <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>NUMBER<span class="token punctuation">)</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;姓名:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">displayName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;号码:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">phoneNumber</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;======================&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    cursor<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//游标关闭！！</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-通信录插入联系人" tabindex="-1"><a class="header-anchor" href="#_3-通信录插入联系人" aria-hidden="true">#</a> 3.通信录插入联系人</h3><table><thead><tr><th style="text-align:left;">表名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">content://com.android.contacts/data/data</td><td style="text-align:left;">插入联系人的表的名字</td></tr><tr><td style="text-align:left;">content://com.android.contacts/data/raw_contacts</td><td style="text-align:left;">插入联系人的原始表的名字</td></tr></tbody></table><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">//插入联系人</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">insertContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
     * 首先向RawContacts.CONTENT_URI执行一个空值插入，目的是获得系统返回的rawContactId
     * 这时后面插入data表的数据，才能使插入的联系人在通讯录里面可见
     */</span>
    <span class="token keyword">val</span> resolver <span class="token operator">=</span> contentResolver
    <span class="token keyword">val</span> values <span class="token operator">=</span> <span class="token function">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> rawContactUri <span class="token operator">=</span> contentResolver<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>RawContacts<span class="token punctuation">.</span>CONTENT_URI<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token operator">!!</span>
    <span class="token keyword">val</span> rawContactId <span class="token operator">=</span> ContentUris<span class="token punctuation">.</span><span class="token function">parseId</span><span class="token punctuation">(</span>rawContactUri<span class="token punctuation">)</span>

    <span class="token comment">//往data表里写入姓名数据</span>
    values<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//先把可能存在的数据清空</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>RAW_CONTACT_ID <span class="token punctuation">,</span> rawContactId<span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>MIMETYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>StructuredName<span class="token punctuation">.</span>CONTENT_ITEM_TYPE<span class="token punctuation">)</span> <span class="token comment">//内容类型</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>StructuredName<span class="token punctuation">.</span>GIVEN_NAME <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;some_name&quot;</span></span><span class="token punctuation">)</span>
    resolver<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTENT_URI <span class="token punctuation">,</span> values<span class="token punctuation">)</span>

    <span class="token comment">//往data表里写入电话数据</span>
    values<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//先把可能存在的数据清空</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>RAW_CONTACT_ID <span class="token punctuation">,</span> rawContactId<span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>MIMETYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>CONTENT_ITEM_TYPE<span class="token punctuation">)</span> <span class="token comment">//内容类型</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>NUMBER <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;1231231234&quot;</span></span><span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>TYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>TYPE_MOBILE<span class="token punctuation">)</span> <span class="token comment">//手机号</span>
    resolver<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTENT_URI <span class="token punctuation">,</span> values<span class="token punctuation">)</span>

    <span class="token comment">//往data表里写入Email的数据</span>
    values<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//先把可能存在的数据清空</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>RAW_CONTACT_ID <span class="token punctuation">,</span> rawContactId<span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>MIMETYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>Email<span class="token punctuation">.</span>CONTENT_ITEM_TYPE<span class="token punctuation">)</span> <span class="token comment">//内容类型</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>Email<span class="token punctuation">.</span>DATA <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;some_name@xx.com&quot;</span></span><span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>Email<span class="token punctuation">.</span>TYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>Email<span class="token punctuation">.</span>TYPE_HOME<span class="token punctuation">)</span> <span class="token comment">//家庭邮箱</span>
    resolver<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTENT_URI <span class="token punctuation">,</span> values<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-更新联系人信息" tabindex="-1"><a class="header-anchor" href="#_4-更新联系人信息" aria-hidden="true">#</a> 4.更新联系人信息</h3><ul><li>根据手机号获取联系人在通讯录的 contact_id</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token annotation builtin">@SuppressLint</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Range&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">getContactIdByPhone</span><span class="token punctuation">(</span>phone <span class="token operator">:</span> Long<span class="token punctuation">)</span> <span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">{</span>
    <span class="token keyword">val</span> uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;content://com.android.contacts/data/phones/filter/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">phone</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> resolver <span class="token operator">=</span> contentResolver
    <span class="token keyword">val</span> cursor <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTACT_ID<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?:</span><span class="token keyword">return</span> <span class="token keyword">null</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">val</span> contractId <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">getColumnIndex</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTACT_ID<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> contractId
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>更新联系人的姓名</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">//更新联系人</span>
<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">updateContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> contractId <span class="token operator">=</span> <span class="token function">getContactIdByPhone</span><span class="token punctuation">(</span><span class="token number">234524</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>contractId <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;联系人不存在，无法更新&quot;</span></span> <span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">val</span> values <span class="token operator">=</span> <span class="token function">ContentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>MIMETYPE <span class="token punctuation">,</span> CommonDataKinds<span class="token punctuation">.</span>StructuredName<span class="token punctuation">.</span>CONTENT_ITEM_TYPE<span class="token punctuation">)</span>
    values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CommonDataKinds<span class="token punctuation">.</span>StructuredName<span class="token punctuation">.</span>GIVEN_NAME<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;new_name&quot;</span></span><span class="token punctuation">)</span>
    contentResolver<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
        ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTENT_URI<span class="token punctuation">,</span>
        values<span class="token punctuation">,</span>
        <span class="token string-literal singleline"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">ContactsContract<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CONTACT_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=?&quot;</span></span><span class="token punctuation">,</span>
        <span class="token function">arrayOf</span><span class="token punctuation">(</span>contractId<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-删除联系人" tabindex="-1"><a class="header-anchor" href="#_5-删除联系人" aria-hidden="true">#</a> 5.删除联系人</h3><ul><li>根据姓名删除联系人</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> ret <span class="token operator">=</span> contentResolver<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>
    ContactsContract<span class="token punctuation">.</span>RawContacts<span class="token punctuation">.</span>CONTENT_URI<span class="token punctuation">,</span>
    CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>DISPLAY_NAME <span class="token operator">+</span> <span class="token string-literal singleline"><span class="token string">&quot;=?&quot;</span></span><span class="token punctuation">,</span>
    <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;some_name&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;删除成功&quot;</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;删除失败&quot;</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>根据手机号删除联系人</li></ul><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> contact_id <span class="token operator">=</span> <span class="token function">getContactIdByPhone</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">)</span>

contentResolver<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>RawContacts<span class="token punctuation">.</span>CONTENT_URI<span class="token punctuation">,</span>CommonDataKinds<span class="token punctuation">.</span>Phone<span class="token punctuation">.</span>CONTACT_ID<span class="token operator">+</span><span class="token string-literal singleline"><span class="token string">&quot;=?&quot;</span></span><span class="token punctuation">,</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>contact_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-读取收件箱所有短信" tabindex="-1"><a class="header-anchor" href="#_6-读取收件箱所有短信" aria-hidden="true">#</a> 6.读取收件箱所有短信</h3><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">address</td><td style="text-align:left;">收件人地址，即手机号，如+8613811810000</td></tr><tr><td style="text-align:left;">body</td><td style="text-align:left;">短信内容</td></tr><tr><td style="text-align:left;">date</td><td style="text-align:left;">日期，long 型，如 1346988516</td></tr><tr><td style="text-align:left;">type</td><td style="text-align:left;">类型，1 是接收到的，2 是已发出</td></tr><tr><td style="text-align:left;">read</td><td style="text-align:left;">是否阅读，0 未读，1 已读</td></tr><tr><td style="text-align:left;">protocol</td><td style="text-align:left;">协议，0SMS_RPOTO 短信，1MMS_PROTO 彩信</td></tr><tr><td style="text-align:left;">person</td><td style="text-align:left;">发件人，如果发件人在通讯录中则为具体姓名，陌生人为 null</td></tr></tbody></table><ul><li>需要动态获取权限</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_SMS<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;content://sms/&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> resolver <span class="token operator">=</span> contentResolver
    <span class="token comment">//查询短信的  发件人地址  日期     短信类型  短信具体内容</span>
    <span class="token keyword">val</span> cursor <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;address&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;address&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;type&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;body&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?:</span><span class="token keyword">return</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">val</span> address <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> <span class="token keyword">data</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> type <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> body <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;收件人 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">address</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;类型时间 [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">type</span></span><span class="token string">]:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression"><span class="token keyword">data</span></span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;短信内容 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">body</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;ContentProvider&quot;</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">&quot;-----------------------------&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    cursor<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//关闭游标！！</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>短信相关的其它操作 uri content://sms/ 所有短信 content://sms/inbox 收件箱 content://sms/sent 已发送 content://sms/draft 草稿 content://sms/outbox 发件箱 content://sms/failed 发送失败 content://sms/queued 待发送列表</p></blockquote><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li><a href="https://blog.csdn.net/white1148/category_11379150.html" target="_blank" rel="noopener noreferrer">white1148 博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="http://www.imooc.com/learn/1307" target="_blank" rel="noopener noreferrer">2021Android 从零入门到实战(Kotlin 版) 视频<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/xmllein/ap-first" target="_blank" rel="noopener noreferrer">github 源码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/xmllein/edit/main/android/components/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/article/android/net/" class="" aria-label="网络基础"><!--[--><!--]--> 网络基础 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/article/assets/app.26c798e2.js" defer></script>
  </body>
</html>
