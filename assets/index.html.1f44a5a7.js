import{_ as i,r as p,o as u,c as r,d as a,w as t,a as n,b as s,e as c}from"./app.26c798e2.js";const k={},d=n("h2",{id:"项目开始",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#项目开始","aria-hidden":"true"},"#"),s(" 项目开始")],-1),m=n("ul",null,[n("li",null,[s("项目是 "),n("code",null,"koa + ts + sequelize + mysql")]),n("li",null,[s("项目 "),n("code",null,"package.json")])],-1),v=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"koa-api"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"version"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"1.0.0"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"description"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"koa-api"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"main"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"index.ts"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"dev"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"nodemon"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"test"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"jest"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"jest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"preset"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"ts-jest"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"keywords"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"koa"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"ts"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"mysql"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"author"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"license"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"MIT"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"dependencies"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"dotenv"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^16.0.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"koa"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.13.4"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"koa-router"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^12.0.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"log4js"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^6.7.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"mysql2"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.3.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"reflect-metadata"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.1.13"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"sequelize"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^6.25.8"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"sequelize-typescript"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.1.5"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"jsonwebtoken"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^8.5.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"koa-body"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^6.0.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"supertest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^6.3.1"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"devDependencies"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"@types/dotenv"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^8.2.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/jest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^29.2.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/jsonwebtoken"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^8.5.9"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/koa"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.13.5"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/koa-router"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^7.4.4"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/log4js"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.3.5"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/node"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^18.11.9"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/supertest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.0.12"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/validator"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^13.7.10"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"async-validator"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.2.5"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"jest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^29.3.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"ts-jest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^29.0.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"ts-node"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^10.9.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"typescript"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.9.3"'),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" run "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./app'"),s(`

`),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3000"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" Koa "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" router "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./router'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Server "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'http'"),s(`
`),n("span",{class:"token keyword"},"const"),s(" app "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Koa"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 注册路由"),s(`
app`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"use"),n("span",{class:"token punctuation"},"("),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"routes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"const"),s(" run "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("port"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" Server "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(" app"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"listen"),n("span",{class:"token punctuation"},"("),s("port"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Server running on port "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("port"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` run
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),g=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" Router "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa-router'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" IndexController "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../controller/IndexController'"),s(`
`),n("span",{class:"token keyword"},"const"),s(" router "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Router"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" prefix"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/admin'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 测试"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/'"),n("span",{class:"token punctuation"},","),s(" IndexController"),n("span",{class:"token punctuation"},"."),s("index"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` router
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"IndexController"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"index"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'hello world hello world'"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"IndexController"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("ul",null,[n("li",null,[s("添加 "),n("code",null,"nodemon"),s(" 热重启")])],-1),h=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"watch"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"app/**/*.ts"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"utils/**/*.ts"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"./index.ts"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"ignore"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"node_modules"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"exec"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"ts-node index.ts"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"ext"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'".ts"'),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("h2",{id:"单元测试",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#单元测试","aria-hidden":"true"},"#"),s(" 单元测试")],-1),x=n("ul",null,[n("li",null,[s("安装 "),n("code",null,"npm i jest ts-jest supertest @types/jest @types/supertest -D")]),n("li",null,[n("code",null,"tsc --init"),s(" 初始化 "),n("code",null,"tsconfig.json")])],-1),A=n("div",{class:"language-json line-numbers-mode","data-ext":"json"},[n("pre",{class:"language-json"},[n("code",null,[s("  "),n("span",{class:"token property"},'"jest"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"preset"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"ts-jest"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),S=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" run "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../app'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Server "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'http'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" request "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'supertest'"),s(`
`),n("span",{class:"token comment"},"// 测试"),s(`
`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'sum set'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'sum 1'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toEqual"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"//  测试服务器"),s(`
`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'http'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" server"),n("span",{class:"token operator"},":"),s(` Server
  `),n("span",{class:"token function"},"beforeAll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    server `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3003"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'GET /admin'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"request"),n("span",{class:"token punctuation"},"("),s("server"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/admin'"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},"."),s("text"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toEqual"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'admin'"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"afterAll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    server`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),q=n("h2",{id:"dotenv-文件配置",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dotenv-文件配置","aria-hidden":"true"},"#"),s(" dotenv 文件配置")],-1),C=n("ul",null,[n("li",null,[s("安装 "),n("code",null,"npm i dotenv @types/dotenv -D")])],-1),T=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token assign-left variable"},"NODE_ENV"),n("span",{class:"token operator"},"="),s(`dev
`),n("span",{class:"token assign-left variable"},"SERVER_PORT"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"3000"),s(`
`),n("span",{class:"token assign-left variable"},"SERVER_HOST"),n("span",{class:"token operator"},"="),s(`localhost
`),n("span",{class:"token assign-left variable"},"DB_HOST"),n("span",{class:"token operator"},"="),s(`localhost
`),n("span",{class:"token assign-left variable"},"DB_PORT"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"3306"),s(`
`),n("span",{class:"token assign-left variable"},"DB_USER"),n("span",{class:"token operator"},"="),s(`root
`),n("span",{class:"token assign-left variable"},"DB_PASSWORD"),n("span",{class:"token operator"},"="),s(`root
`),n("span",{class:"token assign-left variable"},"DB_NAME"),n("span",{class:"token operator"},"="),s(`database_name
`),n("span",{class:"token assign-left variable"},"DB_DEBUG"),n("span",{class:"token operator"},"="),s(`true
`),n("span",{class:"token assign-left variable"},"JWT_SECRET"),n("span",{class:"token operator"},"="),s(`secret
`),n("span",{class:"token assign-left variable"},"JWT_EXPIRES"),n("span",{class:"token operator"},"="),s(`30d
`),n("span",{class:"token assign-left variable"},"STATIC_PATH"),n("span",{class:"token operator"},"="),s(`statics
`),n("span",{class:"token assign-left variable"},"Auth"),n("span",{class:"token operator"},"="),s(`asdfasdfasdfsad

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" dotenv "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'dotenv'"),s(`
dotenv`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"config"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),z=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" run "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./app'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" config "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./app/config'"),s(`

`),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),s("config"),n("span",{class:"token punctuation"},"."),s("server"),n("span",{class:"token punctuation"},"."),s("port"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=n("h2",{id:"log4js-日志",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#log4js-日志","aria-hidden":"true"},"#"),s(" log4js 日志")],-1),M=n("ul",null,[n("li",null,[s("安装 "),n("code",null,"npm i log4js @types/log4js -D")])],-1),E=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" configure"),n("span",{class:"token punctuation"},","),s(" getLogger "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'log4js'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" config "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../config'"),s(`

`),n("span",{class:"token comment"},"// 配置"),s(`
`),n("span",{class:"token function"},"configure"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  appenders`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    cheese`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'file'"),n("span",{class:"token punctuation"},","),s(" filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'logs/cheese.log'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    access`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'file'"),n("span",{class:"token punctuation"},","),s(" filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'logs/access.log'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  categories`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"default"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" appenders"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'cheese'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" level"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'info'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    access`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" appenders"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'access'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" level"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'info'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" accessLogger "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getLogger"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'access'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"getLogger"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 使用 logger"),s(`
`),n("span",{class:"token comment"},"// const logStr = `method: ${ctx.method}, url: ${ctx.url}, ua: ${ctx.headers['user-agent']}`"),s(`
`),n("span",{class:"token comment"},"// accessLogger.info('access', logStr)"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),R=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" configure"),n("span",{class:"token punctuation"},","),s(" getLogger "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'log4js'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" config "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../config'"),s(`

`),n("span",{class:"token comment"},"// 配置"),s(`
`),n("span",{class:"token function"},"configure"),n("span",{class:"token punctuation"},"("),s("config"),n("span",{class:"token punctuation"},"."),s("log"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" accessLogger "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getLogger"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'access'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token function"},"getLogger"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),N=n("h2",{id:"数据库-sequelize",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#数据库-sequelize","aria-hidden":"true"},"#"),s(" 数据库 sequelize")],-1),L=n("ul",null,[n("li",null,[s("安装 "),n("code",null,"npm i @types/node @types/validator")]),n("li",null,[s("安装 "),n("code",null,"npm i sequelize reflect-metadata sequelize-typescript mysql2 -S")])],-1),B=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Sequelize "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'sequelize-typescript'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" config "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../config'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" dbLogger "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../logger'"),s(`
`),n("span",{class:"token comment"},"// sequelize 配置"),s(`
`),n("span",{class:"token keyword"},"const"),s(" sequelize "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Sequelize"),n("span",{class:"token punctuation"},"("),s(`
  config`),n("span",{class:"token punctuation"},"."),s("db"),n("span",{class:"token punctuation"},"."),s("db_name "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
  config`),n("span",{class:"token punctuation"},"."),s("db"),n("span",{class:"token punctuation"},"."),s("db_user "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
  config`),n("span",{class:"token punctuation"},"."),s("db"),n("span",{class:"token punctuation"},"."),s("db_password "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"{"),s(`
    host`),n("span",{class:"token operator"},":"),s(" config"),n("span",{class:"token punctuation"},"."),s("db"),n("span",{class:"token punctuation"},"."),s("db_host "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
    port`),n("span",{class:"token operator"},":"),s(" config"),n("span",{class:"token punctuation"},"."),s("db"),n("span",{class:"token punctuation"},"."),s("db_port "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},","),s(`
    dialect`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'mysql'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token function-variable function"},"logging"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("msg"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" dbLogger"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),s("msg"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    define`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      timestamps`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
      createdAt`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'created_at'"),n("span",{class:"token punctuation"},","),s(`
      updatedAt`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'updated_at'"),n("span",{class:"token punctuation"},","),s(`
      deletedAt`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'deleted_at'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    models`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("__dirname "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},"'/models/**/*.ts'"),n("span",{class:"token punctuation"},","),s(" __dirname "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},"'/models/**/*.js'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 测试连接"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"db"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"await"),s(" sequelize"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"authenticate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Connection has been established successfully.'"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Unable to connect to the database:'"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` db
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),P=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Model"),n("span",{class:"token punctuation"},","),s(" Table"),n("span",{class:"token punctuation"},","),s(" Column "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'sequelize-typescript'"),s(`
`),n("span",{class:"token comment"},"// 对应表中的 admins 表"),s(`
`),n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Table")]),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Admin"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"Model"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Column")]),s(`
  name`),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
  `),n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Column")]),s(`
  mobile`),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
  `),n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Column")]),s(`
  email`),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" db "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./db'"),s(`
`),n("span",{class:"token function"},"db"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),D=c(`<h2 id="sequelize-常用操作" tabindex="-1"><a class="header-anchor" href="#sequelize-常用操作" aria-hidden="true">#</a> sequelize 常用操作</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// # 1, 查询全部</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// # 2，指定字段查询</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;mobile&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// # 3，条件查询</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// # 4，分页查询</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token literal-property property">order</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DESC&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// # 5，条件查询（id 大于 6） + 分页查询</span>
<span class="token comment">// Op 是 sequelize 的操作符</span>
<span class="token comment">// Op.gt 大于 Op.lt 小于 Op.gte 大于等于 Op.lte 小于等于 Op.ne 不等于 Op.eq 等于 Op.not 不等于</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>Op<span class="token punctuation">.</span>gt<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token literal-property property">order</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DESC&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 增加数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;13800013800&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&#39;123@qq.com&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 根据主键查询数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">findByPk</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 根据主键更新数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;admin1&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;13800013800&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&#39;456@qq.com&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 根据主键删除数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> Admin<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sequelize-表关联" tabindex="-1"><a class="header-anchor" href="#sequelize-表关联" aria-hidden="true">#</a> sequelize 表关联</h2><h3 id="一对一" tabindex="-1"><a class="header-anchor" href="#一对一" aria-hidden="true">#</a> 一对一</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 一对一： hasOne 或者 belongsTo, 需要借助外键</span>
<span class="token comment">//  例如 一个文章分类下面有多个文章，查询文章时候，需要查询文章分类</span>
<span class="token comment">//  定义文章模型</span>
<span class="token keyword">const</span> ArticleModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;article&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
ArticleModel<span class="token punctuation">.</span>ArticleCate <span class="token operator">=</span> ArticleModel<span class="token punctuation">.</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>CategoryModel<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foreignKey</span><span class="token operator">:</span> <span class="token string">&#39;cate_id&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 定义文章分类模型</span>
<span class="token keyword">const</span> CategoryModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;category&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 查询语句</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> ArticleModel<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">model</span><span class="token operator">:</span> CategoryModel<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 例如2： 系统设置表 和 系统设置详情表</span>
<span class="token comment">// 定义系统设置模型</span>
<span class="token keyword">const</span> SettingModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span>
  <span class="token string">&#39;setting&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
      <span class="token literal-property property">primaryKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">autoIncrement</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
    <span class="token literal-property property">icon</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">timestamps</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tableName</span><span class="token operator">:</span> <span class="token string">&#39;setting&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

SettingModel<span class="token punctuation">.</span>SettingDetail <span class="token operator">=</span> SettingModel<span class="token punctuation">.</span><span class="token function">hasOne</span><span class="token punctuation">(</span>SettingDetailModel<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foreignKey</span><span class="token operator">:</span> <span class="token string">&#39;setting_id&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 定义系统设置详情模型</span>
<span class="token keyword">const</span> SettingDetailModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span>
  <span class="token string">&#39;setting_detail&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
      <span class="token literal-property property">primaryKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">autoIncrement</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">setting_id</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">timestamps</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tableName</span><span class="token operator">:</span> <span class="token string">&#39;setting_detail&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 查询语句</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> SettingModel<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">model</span><span class="token operator">:</span> SettingDetailModel<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="一对多" tabindex="-1"><a class="header-anchor" href="#一对多" aria-hidden="true">#</a> 一对多</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 一对多： hasMany 需要借助外键</span>
<span class="token comment">// 例如： 一个文章分类下面有多个文章，查询文章分类时候，需要查询文章</span>

<span class="token comment">// 上面 文章模型 ArticleModel 已经定义过了</span>
<span class="token comment">// 上面 文章分类模型 CategoryModel 已经定义过了</span>
<span class="token comment">// 定义文章分类模型 加上 关联</span>
CategoryModel<span class="token punctuation">.</span>ArticleList <span class="token operator">=</span> CategoryModel<span class="token punctuation">.</span><span class="token function">hasMany</span><span class="token punctuation">(</span>ArticleModel<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foreignKey</span><span class="token operator">:</span> <span class="token string">&#39;cate_id&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 查询语句</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> CategoryModel<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">model</span><span class="token operator">:</span> ArticleModel<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多对多" tabindex="-1"><a class="header-anchor" href="#多对多" aria-hidden="true">#</a> 多对多</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//多对多: belongsToMany 需要借助第三张表</span>
<span class="token comment">// 例如：一个学生可以选择多个课程，一个课程可以被多个学生选择</span>
<span class="token comment">// 定义学生模型</span>
<span class="token keyword">const</span> StudentModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;student&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
    <span class="token literal-property property">primaryKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">autoIncrement</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

StudentModel<span class="token punctuation">.</span>CourseList <span class="token operator">=</span> StudentModel<span class="token punctuation">.</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span>CourseModel<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">through</span><span class="token operator">:</span> <span class="token string">&#39;student_course&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foreignKey</span><span class="token operator">:</span> <span class="token string">&#39;student_id&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">otherKey</span><span class="token operator">:</span> <span class="token string">&#39;course_id&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 定义课程模型</span>
<span class="token keyword">const</span> CourseModel <span class="token operator">=</span> sequelize<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;course&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">,</span>
    <span class="token literal-property property">primaryKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">autoIncrement</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

CourseModel<span class="token punctuation">.</span>StudentList <span class="token operator">=</span> CourseModel<span class="token punctuation">.</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span>StudentModel<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">through</span><span class="token operator">:</span> <span class="token string">&#39;student_course&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foreignKey</span><span class="token operator">:</span> <span class="token string">&#39;course_id&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">otherKey</span><span class="token operator">:</span> <span class="token string">&#39;student_id&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 查询语句: 学生选择了哪些课程</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> StudentModel<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">model</span><span class="token operator">:</span> CourseModel<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sequelize-常见数据类型" tabindex="-1"><a class="header-anchor" href="#sequelize-常见数据类型" aria-hidden="true">#</a> sequelize 常见数据类型</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1. 数字类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">INTEGER</span> <span class="token comment">// 整型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">BIGINT</span> <span class="token comment">// 大整型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">FLOAT</span> <span class="token comment">// 浮点型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">DOUBLE</span> <span class="token comment">// 双精度浮点型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">DECIMAL</span> <span class="token comment">// 小数类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">REAL</span> <span class="token comment">// 浮点型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">NUMBER</span> <span class="token comment">// 数字类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">TINYINT</span> <span class="token comment">// 小整型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">SMALLINT</span> <span class="token comment">// 小整型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">MEDIUMINT</span> <span class="token comment">// 中整型</span>

<span class="token comment">// 2. 字符串类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">STRING</span> <span class="token comment">// 字符串类型 varchar(255)</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">CHAR</span> <span class="token comment">// 字符串类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">TEXT</span> <span class="token comment">// 文本类型</span>
Sequelize<span class="token punctuation">.</span>String<span class="token punctuation">.</span><span class="token constant">BINARY</span> <span class="token comment">// 二进制类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">TINYTEXT</span> <span class="token comment">// 文本类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">MEDIUMTEXT</span> <span class="token comment">// 文本类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">LONGTEXT</span> <span class="token comment">// 文本类型</span>

Sequelize<span class="token punctuation">.</span><span class="token constant">UUID</span> <span class="token comment">// UUID 类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">ENUM</span> <span class="token comment">// 枚举类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">JSON</span> <span class="token comment">// JSON 类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">JSONB</span> <span class="token comment">// JSONB 类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">BOOLEAN</span> <span class="token comment">// 布尔类型</span>

<span class="token comment">// 3. 日期类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">DATE</span> <span class="token comment">// 日期类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">DATEONLY</span> <span class="token comment">// 日期类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">TIME</span> <span class="token comment">// 时间类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">NOW</span> <span class="token comment">// 时间类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">BLOB</span> <span class="token comment">// 二进制类型</span>
Sequelize<span class="token punctuation">.</span><span class="token constant">BINARY</span> <span class="token comment">// 二进制类型</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jwt-认证" tabindex="-1"><a class="header-anchor" href="#jwt-认证" aria-hidden="true">#</a> jwt 认证</h2><ul><li>安装 <code>npm i jsonwebtoken @types/jsonwebtoken -D</code></li></ul>`,13),G=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" jwt "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'jsonwebtoken'"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"sign"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(" jwt"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sign"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" admin"),n("span",{class:"token operator"},":"),s(" payload "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(" process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"JWT_SECRET"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    expiresIn`),n("span",{class:"token operator"},":"),s(" process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"JWT_EXPIRES"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"verify"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("token"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(" jwt"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"verify"),n("span",{class:"token punctuation"},"("),s("token"),n("span",{class:"token punctuation"},","),s(" process"),n("span",{class:"token punctuation"},"."),s("env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"JWT_SECRET"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token punctuation"},"{"),s(" sign"),n("span",{class:"token punctuation"},","),s(" verify "),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),U=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" sign "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/auth'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminService "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../service/AdminService'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"LoginController"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"login"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" admin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAdmin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" token "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"sign"),n("span",{class:"token punctuation"},"("),s("admin"),n("span",{class:"token punctuation"},")"),s(`
    ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
      token`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"LoginController"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),J=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"//  登录"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/login'"),n("span",{class:"token punctuation"},","),s(" LoginController"),n("span",{class:"token punctuation"},"."),s("login"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),K=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context"),n("span",{class:"token punctuation"},","),s(" Next "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" verify "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/auth'"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"AuthMiddleware"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},","),s(" next"),n("span",{class:"token operator"},":"),s(" Next"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" token "),n("span",{class:"token operator"},"="),s(" ctx"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),s("authorization "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" data "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"verify"),n("span",{class:"token punctuation"},"("),s("token"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"' '"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'data=> '"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    code`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"401"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'token is required'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` AuthMiddleware
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),W=n("h2",{id:"统一异常处理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#统一异常处理","aria-hidden":"true"},"#"),s(" 统一异常处理")],-1),H=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// 统一返回数据格式"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Response"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
      code`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(`
      data`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token function"},"fail"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},","),s(" msg"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(" code"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"500"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
      code`),n("span",{class:"token punctuation"},","),s(`
      msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),V=n("h2",{id:"统一分页处理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#统一分页处理","aria-hidden":"true"},"#"),s(" 统一分页处理")],-1),X=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// 统一分页处理"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Model "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'sequelize-typescript'"),s(`

`),n("span",{class:"token keyword"},"const"),s(" paginate "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"async"),s(),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),s(),n("span",{class:"token keyword"},"extends"),s(" Model"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s(`
  data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(`
  currentPage`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(`
  total`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
  limit`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"15"),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" totalPage "),n("span",{class:"token operator"},"="),s(" Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ceil"),n("span",{class:"token punctuation"},"("),s("total "),n("span",{class:"token operator"},"/"),s(" limit"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" result "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    data`),n("span",{class:"token punctuation"},","),s(`
    currentPage`),n("span",{class:"token punctuation"},","),s(`
    totalPage`),n("span",{class:"token punctuation"},","),s(`
    total`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token keyword"},"return"),s(` result
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` paginate
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),F=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[s(),n("span",{class:"token function"},"getAdminListByPage"),n("span",{class:"token punctuation"},"("),s("page"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(" limit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"15"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" offset "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("page "),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(` limit
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findAndCountAll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      offset`),n("span",{class:"token punctuation"},","),s(`
      limit`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Y=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" paginate "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/paginate'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Response "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/response'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminService "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../service/AdminService'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AdminControoler"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"getAdminList"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" usp "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"URLSearchParams"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("querystring"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'usp'"),n("span",{class:"token punctuation"},","),s(" usp"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" currentPage "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'page'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" limit "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'limit'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"15"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" rows"),n("span",{class:"token punctuation"},","),s(" count "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAdminListByPage"),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s(`
      ctx`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"paginate"),n("span",{class:"token punctuation"},"("),s("rows"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" count"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"AdminControoler"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Z=n("h2",{id:"自定义数据校验",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自定义数据校验","aria-hidden":"true"},"#"),s(" 自定义数据校验")],-1),$=n("ul",null,[n("li",null,[s("安装 "),n("code",null,"npm i async-validator koa-body -D")])],-1),Q=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// 数据校验"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Schema"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" Rules"),n("span",{class:"token punctuation"},","),s(" Values "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'async-validator'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`

`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"validate"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),n("span",{class:"token constant"},"T"),s(),n("span",{class:"token keyword"},"extends"),s(" Values"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s(`
  ctx`),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},","),s(`
  rules`),n("span",{class:"token operator"},":"),s(` Rules
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},";"),s(" error"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" validator "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Schema"),n("span",{class:"token punctuation"},"("),s("rules"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" data "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("method "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'GET'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    data `),n("span",{class:"token operator"},"="),s(" ctx"),n("span",{class:"token punctuation"},"."),s(`query
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("method "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'POST'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    data `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getFormData"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"T"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"await"),s(` validator
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"validate"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token operator"},":"),s(" data "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
        data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"T"),n("span",{class:"token punctuation"},","),s(`
        error`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"getFormData"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(" ctx"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s(`body
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` validate
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),nn=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" sign "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/auth'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminService "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../service/AdminService'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Response "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/response'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Rules "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'async-validator'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" validate "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/validate'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"LoginController"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"login"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" rules"),n("span",{class:"token operator"},":"),s(" Rules "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
      name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          type`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'string'"),n("span",{class:"token punctuation"},","),s(`
          required`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
          message`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'用户名不能为空'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      password`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"{"),s(`
          type`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'string'"),n("span",{class:"token punctuation"},","),s(`
          required`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
          message`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'密码不能为空'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},"IAdmin"),s(),n("span",{class:"token punctuation"},"{"),s(`
      name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
      password`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" data"),n("span",{class:"token punctuation"},","),s(" error "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"validate"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("IAdmin"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" rules"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("error "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fail"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"const"),s(" admin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAdmin"),n("span",{class:"token punctuation"},"("),s(`
      ctx`),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s("body"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
      ctx`),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s("body"),n("span",{class:"token punctuation"},"."),s("password "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token builtin"},"string"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("admin"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" token "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"sign"),n("span",{class:"token punctuation"},"("),s("admin"),n("span",{class:"token punctuation"},")"),s(`
      ctx`),n("span",{class:"token punctuation"},"."),s("body "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
        token`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
      Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" token"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fail"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'用户名或密码错误'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"401"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"LoginController"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),sn=c('<h2 id="文件上传" tabindex="-1"><a class="header-anchor" href="#文件上传" aria-hidden="true">#</a> 文件上传</h2><ul><li>使用 <code>koa-body</code> 中间件</li></ul><h2 id="管理员管理-api" tabindex="-1"><a class="header-anchor" href="#管理员管理-api" aria-hidden="true">#</a> 管理员管理 Api</h2><ul><li>添加管理员</li><li>编辑挂历员</li><li>删除管理员</li></ul>',4),an=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" Admin "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../db/models/Admin'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AdminService"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"getAdmin"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},","),s(" password"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findOne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      where`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        name`),n("span",{class:"token punctuation"},","),s(`
        password`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token function"},"getadminById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findByPk"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token function"},"getAdminListByPage"),n("span",{class:"token punctuation"},"("),s("page"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(" limit"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"15"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" offset "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("page "),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(` limit
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findAndCountAll"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      offset`),n("span",{class:"token punctuation"},","),s(`
      limit`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token comment"},"// 添加管理员"),s(`
  `),n("span",{class:"token function"},"addAdmin"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(" password"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(" mobile"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(" email"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"create"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      name`),n("span",{class:"token punctuation"},","),s(`
      password`),n("span",{class:"token punctuation"},","),s(`
      mobile`),n("span",{class:"token punctuation"},","),s(`
      email`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 更新管理员"),s(`
  `),n("span",{class:"token function"},"updateAdminById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},","),s(" admin"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("admin"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
      where`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        id`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token comment"},"// 删除管理员"),s(`
  `),n("span",{class:"token function"},"deleteAdminById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Admin"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"destroy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      where`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        id`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"AdminService"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),tn=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" paginate "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/paginate'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Response "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/response'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminService "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../service/AdminService'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AdminControoler"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// 获取管理员列表"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"getAdminList"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" usp "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"URLSearchParams"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("querystring"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'usp'"),n("span",{class:"token punctuation"},","),s(" usp"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" currentPage "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'page'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" limit "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'limit'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"15"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" rows"),n("span",{class:"token punctuation"},","),s(" count "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAdminListByPage"),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s(`
      ctx`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"paginate"),n("span",{class:"token punctuation"},"("),s("rows"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" count"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 添加管理员"),s(`
  `),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Context "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" paginate "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/paginate'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Response "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../../utils/response'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" Admin "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../db/models/Admin'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminService "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../service/AdminService'"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AdminControoler"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// 获取管理员列表"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"getAdminList"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" usp "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"URLSearchParams"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},"."),s("querystring"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'usp'"),n("span",{class:"token punctuation"},","),s(" usp"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" currentPage "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'page'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" limit "),n("span",{class:"token operator"},"="),s(" usp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'limit'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token number"},"15"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" rows"),n("span",{class:"token punctuation"},","),s(" count "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAdminListByPage"),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s(`
      ctx`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"paginate"),n("span",{class:"token punctuation"},"("),s("rows"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("currentPage"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" count"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"Number"),n("span",{class:"token punctuation"},"("),s("limit"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 添加管理员"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"addAdmin"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" name"),n("span",{class:"token punctuation"},","),s(" password"),n("span",{class:"token punctuation"},","),s(" mobile"),n("span",{class:"token punctuation"},","),s(" email "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" ctx"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s(`body
    `),n("span",{class:"token keyword"},"const"),s(" admin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addAdmin"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},","),s(" password"),n("span",{class:"token punctuation"},","),s(" mobile"),n("span",{class:"token punctuation"},","),s(" email"),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" admin"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 编辑管理员"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"editAdmin"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" adminId"),n("span",{class:"token punctuation"},","),s(" admin "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" ctx"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s(`body
    `),n("span",{class:"token keyword"},"const"),s(" data "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getadminById"),n("span",{class:"token punctuation"},"("),s("adminId"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("data"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fail"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'管理员不存在'"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    admin`),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(" admin"),n("span",{class:"token punctuation"},"."),s(`name
    admin`),n("span",{class:"token punctuation"},"."),s("mobile "),n("span",{class:"token operator"},"="),s(" admin"),n("span",{class:"token punctuation"},"."),s(`mobile
    admin`),n("span",{class:"token punctuation"},"."),s("email "),n("span",{class:"token operator"},"="),s(" admin"),n("span",{class:"token punctuation"},"."),s(`email
    `),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"updateAdminById"),n("span",{class:"token punctuation"},"("),s("adminId"),n("span",{class:"token punctuation"},","),s(" admin"),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" admin"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 删除管理员"),s(`
  `),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"deleteAdmin"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token operator"},":"),s(" Context"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" adminId "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(" ctx"),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},"."),s(`body
    `),n("span",{class:"token keyword"},"const"),s(" admin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getadminById"),n("span",{class:"token punctuation"},"("),s("adminId"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("admin"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fail"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'管理员不存在'"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"await"),s(" AdminService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deleteAdminById"),n("span",{class:"token punctuation"},"("),s("adminId"),n("span",{class:"token punctuation"},")"),s(`
    Response`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},","),s(" admin"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"AdminControoler"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),en=n("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" Router "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'koa-router'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" IndexController "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../controller/IndexController'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" LoginController "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../controller/LoginController'"),s(`
`),n("span",{class:"token keyword"},"import"),s(" AdminController "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../controller/AdminController'"),s(`
`),n("span",{class:"token keyword"},"const"),s(" router "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Router"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" prefix"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/admin'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 测试"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/'"),n("span",{class:"token punctuation"},","),s(" IndexController"),n("span",{class:"token punctuation"},"."),s("index"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token comment"},"//  登录"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/login'"),n("span",{class:"token punctuation"},","),s(" LoginController"),n("span",{class:"token punctuation"},"."),s("login"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 获取管理员列表"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/adminList'"),n("span",{class:"token punctuation"},","),s(" AdminController"),n("span",{class:"token punctuation"},"."),s("getAdminList"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 添加管理员"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/addAdmin'"),n("span",{class:"token punctuation"},","),s(" AdminController"),n("span",{class:"token punctuation"},"."),s("addAdmin"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 编辑管理员"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/editAdmin'"),n("span",{class:"token punctuation"},","),s(" AdminController"),n("span",{class:"token punctuation"},"."),s("editAdmin"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 删除管理员"),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/deleteAdmin'"),n("span",{class:"token punctuation"},","),s(" AdminController"),n("span",{class:"token punctuation"},"."),s("deleteAdmin"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(` router
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),on=n("h2",{id:"接口测试工具",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#接口测试工具","aria-hidden":"true"},"#"),s(" 接口测试工具")],-1),pn=n("div",{class:"language-http line-numbers-mode","data-ext":"http"},[n("pre",{class:"language-http"},[n("code",null,[s(`

@BASE_URL = http://localhost:3000/admin
@TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6eyJpZCI6MSwibmFtZSI6ImFkbWluIiwibW9iaWxlIjoiMTM4MDAwMTM4MDAiLCJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSIsInBhc3N3b3JkIjoiMTIzNDU2In0sImlhdCI6MTY2OTM2Mjk2MCwiZXhwIjoxNjY5NDQ5MzYwfQ.MmT1157Hc1jk74px0lt9g3KBbAr7sSA4rg0w4DEx4AM

### 测试
GET {{BASE_URL}}/ HTTP/1.1
`),n("span",{class:"token header"},[n("span",{class:"token header-name keyword"},"Authorization"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token header-value"},"Bearer {{TOKEN}}")]),s(`

###  登录
POST {{BASE_URL}}/login HTTP/1.1
`),n("span",{class:"token header"},[n("span",{class:"token header-name keyword"},"Content-Type"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token header-value"},"application/json")]),s(`
`),n("span",{class:"token application-json"},[s(`
`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"admin"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"password"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"123456"'),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

### 管理员列表
GET `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("BASE_URL"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s("/adminList?page="),n("span",{class:"token number"},"1"),s("&limit="),n("span",{class:"token number"},"15"),s(" HTTP/"),n("span",{class:"token number"},"1.1"),s(`

### 添加管理员
POST `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("BASE_URL"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s("/addAdmin HTTP/"),n("span",{class:"token number"},"1.1"),s(`
Content-Type`),n("span",{class:"token operator"},":"),s(` application/json

`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"admin1"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"password"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"123456"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"mobile"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"13800013800"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"email"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"123123@163.com"'),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

### 编辑管理员
POST `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("BASE_URL"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s("/editAdmin HTTP/"),n("span",{class:"token number"},"1.1"),s(`
Content-Type`),n("span",{class:"token operator"},":"),s(` application/json

`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"adminId"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"admin2"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"password"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"123456"'),s(`
`),n("span",{class:"token punctuation"},"}"),s(`


### 删除管理员
POST `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("BASE_URL"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s("/deleteAdmin HTTP/"),n("span",{class:"token number"},"1.1"),s(`
Content-Type`),n("span",{class:"token operator"},":"),s(` application/json

`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"adminId"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`


`)])])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),cn=n("h2",{id:"参考资料",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},"#"),s(" 参考资料")],-1),ln={href:"https://www.bilibili.com/video/BV1hq4y1G7nZ/?spm_id_from=333.337.search-card.all.click&vd_source=c5abf1ba032ca00c06ebba96e3ff445e",target:"_blank",rel:"noopener noreferrer"};function un(rn,kn){const e=p("CodeGroupItem"),o=p("CodeGroup"),l=p("ExternalLinkIcon");return u(),r("div",null,[d,m,a(o,null,{default:t(()=>[a(e,{title:"package.json"},{default:t(()=>[v]),_:1}),a(e,{title:"./index.ts"},{default:t(()=>[b]),_:1}),a(e,{title:"./app/index.ts"},{default:t(()=>[y]),_:1}),a(e,{title:"./app/router/index.ts"},{default:t(()=>[g]),_:1}),a(e,{title:"./app/controller/IndexController.ts"},{default:t(()=>[w]),_:1})]),_:1}),f,a(o,null,{default:t(()=>[a(e,{title:"nodemon.json"},{default:t(()=>[h]),_:1})]),_:1}),_,x,a(o,null,{default:t(()=>[a(e,{title:"package.json 配置 jest"},{default:t(()=>[A]),_:1}),a(e,{title:"./tests/index.test.ts"},{default:t(()=>[S]),_:1})]),_:1}),q,C,a(o,null,{default:t(()=>[a(e,{title:".env"},{default:t(()=>[T]),_:1}),a(e,{title:"./app/index.ts"},{default:t(()=>[I]),_:1}),a(e,{title:"./index.ts"},{default:t(()=>[z]),_:1})]),_:1}),j,M,a(o,null,{default:t(()=>[a(e,{title:"./app/looger/index.ts"},{default:t(()=>[E]),_:1}),a(e,{title:"accesslog 中间件"},{default:t(()=>[R]),_:1})]),_:1}),N,L,a(o,null,{default:t(()=>[a(e,{title:".app/db/index.ts"},{default:t(()=>[B]),_:1}),a(e,{title:"./app/db/models/Admin.ts"},{default:t(()=>[P]),_:1}),a(e,{title:"./app/index.ts"},{default:t(()=>[O]),_:1})]),_:1}),D,a(o,null,{default:t(()=>[a(e,{title:"./utils/auth.ts"},{default:t(()=>[G]),_:1}),a(e,{title:"使用 sign 返回 token"},{default:t(()=>[U]),_:1}),a(e,{title:"./app/router/index.ts"},{default:t(()=>[J]),_:1}),a(e,{title:"使用 verify 验证 token"},{default:t(()=>[K]),_:1})]),_:1}),W,a(o,null,{default:t(()=>[a(e,{title:"./utils/response.ts"},{default:t(()=>[H]),_:1})]),_:1}),V,a(o,null,{default:t(()=>[a(e,{title:"./utils/paginate.ts"},{default:t(()=>[X]),_:1}),a(e,{title:"./app/service/AdminService.ts"},{default:t(()=>[F]),_:1}),a(e,{title:"./app/controller/AdminController.ts"},{default:t(()=>[Y]),_:1})]),_:1}),Z,$,a(o,null,{default:t(()=>[a(e,{title:"./utils/validator.ts"},{default:t(()=>[Q]),_:1}),a(e,{title:"./app/controller/LoginController.ts"},{default:t(()=>[nn]),_:1})]),_:1}),sn,a(o,null,{default:t(()=>[a(e,{title:"./app/service/AdminService.ts"},{default:t(()=>[an]),_:1}),a(e,{title:"./app/controller/AdminController.ts"},{default:t(()=>[tn]),_:1}),a(e,{title:"./app/router/index.ts"},{default:t(()=>[en]),_:1})]),_:1}),on,a(o,null,{default:t(()=>[a(e,{title:"postman.http"},{default:t(()=>[pn]),_:1})]),_:1}),cn,n("ul",null,[n("li",null,[n("a",ln,[s("koa+node+ts+mysql 开发接口"),a(l)])])])])}const mn=i(k,[["render",un],["__file","index.html.vue"]]);export{mn as default};
